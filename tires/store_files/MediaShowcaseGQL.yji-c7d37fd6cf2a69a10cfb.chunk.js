(globalThis.__LOADABLE_LOADED_CHUNKS__=globalThis.__LOADABLE_LOADED_CHUNKS__||[]).push([[85022],{506654:e=>{e.exports={"add-photos":"add-photos__09f24__QyyCR",center:"center__09f24__izewf",icon:"icon__09f24__utNQJ"}},471668:e=>{e.exports={"media-item":"media-item__09f24__aOzKr","play-icon":"play-icon__09f24__kcxxW"}},747967:e=>{e.exports={"media-cell":"media-cell__09f24__LdcfF","media-cell--bordered":"media-cell--bordered__09f24__chUp9"}},400257:e=>{e.exports={"see-all":"see-all__09f24__SCjnZ",center:"center__09f24__PRfKw",icon:"icon__09f24__LPPK3"}},372664:(e,a,o)=>{"use strict";o.d(a,{Z:()=>n});o(87363);var t=o(657633),i=o(731709);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},s.apply(this,arguments)}const n=function(e){return(0,i.jsx)(t.Z,s({svg:'<svg width="24" height="24" class="icon_svg"><path d="M22.016 11.495h-8.5a.997.997 0 0 1-1-1v-8.5a1 1 0 0 1 1-1h6.5a3.003 3.003 0 0 1 3 3v6.5a1 1 0 0 1-1 1Zm-7.5-2h6.5v-5.5a1 1 0 0 0-1-1h-5.5v6.5Zm5.5 13.51h-6.5a1 1 0 0 1-1-1v-8.5a1.001 1.001 0 0 1 1-1h8.5a1 1 0 0 1 1 1v6.5a3.003 3.003 0 0 1-3 3Zm-5.5-2h5.5a1 1 0 0 0 1-1v-5.5h-6.5v6.5Zm-4.032-9.51h-8.5a.998.998 0 0 1-1-1v-6.5a3.003 3.003 0 0 1 3-3h6.5a.999.999 0 0 1 1 1v8.5a1 1 0 0 1-1 1Zm-7.5-2h6.5v-6.5h-5.5a1 1 0 0 0-1 1v5.5Zm7.5 13.51h-6.5a3.003 3.003 0 0 1-3-3v-6.5a1 1 0 0 1 1-1h8.5a.999.999 0 0 1 1 1v8.5a1 1 0 0 1-1 1Zm-7.5-8.5v5.5a1 1 0 0 0 1 1h5.5v-6.5h-6.5Z"/></svg>',name:"24x24_grid_v2",v2:!0},e))}},860246:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>X});var t=o(87363),i=o.n(t),s=o(882189),n=o(277599),r=o.n(n),d=o(820071),l=o(979186),c=o(657633),h=o(731709);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},m.apply(this,arguments)}const u=function(e){return(0,h.jsx)(c.Z,m({svg:'<svg width="24" height="24" class="icon_svg"><path d="m19.84 11.3-4.5-4.58a1 1 0 1 0-1.43 1.4L16.74 11H4.87a1 1 0 1 0 0 2h11.87l-2.83 2.88a1 1 0 0 0 1.43 1.4l4.5-4.58a1 1 0 0 0 0-1.4Z"/></svg>',name:"24x24_arrow_right_v2",v2:!0},e))};var g=o(269703),b=o(129854),p=o(372664),v=o(68850),_=o(682642),x=o(400257),f=o.n(x);const C=({seeAllUrl:e,mediaTotal:a,seeAllOnClickHandler:o})=>(0,h.jsx)(_.Z,{href:o?"":e,tagType:o?"button":"link",onClick:o&&(e=>{e.preventDefault(),o()}),className:f()["see-all"]},(0,h.jsx)(l.Z,{nowrap:!0,className:f().center},(0,h.jsx)(p.Z,{className:f().icon,color:"white"}),(0,h.jsx)(v.Text,{align:"center",bold:!0,color:"white",size:"large",unselectable:!0},(0,g.ag)("See All %{photoCount}",{photoCount:a}))));var y=o(251918),j=o(506654),w=o.n(j);const T=({addPhotoUrl:e})=>(0,h.jsx)(v.Link,{href:e,role:"link"},(0,h.jsx)(l.Z,{className:w()["add-photos"]},(0,h.jsx)(l.Z,{nowrap:!0,className:w().center},(0,h.jsx)(y.Z,{className:w().icon}),(0,h.jsx)(v.Text,{align:"center",bold:!0,color:"black-regular",unselectable:!0},(0,g.ag)("Add photo")))));var k=o(473550),I=o.n(k),U=o(747967),Z=o.n(U);const S=({mediaHeight:e,mediaWidth:a,children:o,bordered:t})=>{const i={};return a&&(i.width=`${a}px`,i.height=e?`${e}px`:`${a}px`),(0,h.jsx)(l.Z,{className:I()(Z()["media-cell"],t&&Z()["media-cell--bordered"]),dangerouslySetInlineStyle:i},o)};S.defaultProps={mediaHeight:void 0,mediaWidth:void 0,bordered:!1};const A=S;var P=o(421518);function O(){return O=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},O.apply(this,arguments)}const L=function(e){return(0,h.jsx)(c.Z,O({svg:'<svg width="56" height="56" class="icon_svg"><path d="M28 50C15.85 50 6 40.15 6 28S15.85 6 28 6s22 9.85 22 22-9.85 22-22 22zm0-41C17.507 9 9 17.507 9 28s8.507 19 19 19 19-8.507 19-19S38.493 9 28 9zm-6 8 17 10.945L22 39V17z"/></svg>',name:"56x56_video_play"},e))};var z=o(471668),E=o.n(z);const D=({mediaItem:e,onClickPhoto:a})=>(0,h.jsx)(l.Z,{className:E()["media-item"]},(0,h.jsx)(v.Link,{handleClick:e=>{e.preventDefault(),a()},href:e.linkUrl,role:"link"},(0,h.jsx)(P.Ei,{alt:e.altText,src:e.srcUrl}),e.videoThumbnail&&(0,h.jsx)(L,{className:E()["play-icon"],color:"white",colorHover:"white"}))),H=({addPhotoUrl:e,mediaScreenLimit:a,mediaThumbnails:o,mediaTotal:t,seeAllUrl:i,onClickPhoto:s,seeAllOnClickHandler:n})=>{const r=200,d=o.map(((e,a)=>{const d=a===o.length-1&&t>o.length,l=(0,h.jsx)(D,{mediaItem:e,onClickPhoto:()=>{s(a)}}),c=Boolean(d)&&(0,h.jsx)(C,{seeAllUrl:i,mediaTotal:t,seeAllOnClickHandler:n});return(0,h.jsx)(A,{key:e.nodeId,mediaHeight:150,mediaWidth:r},l,c)})),l=216*Math.floor(3.575);return o.length>=t&&d.push((0,h.jsx)(A,{bordered:!1,key:"add-photo-cell",mediaHeight:150,mediaWidth:r},(0,h.jsx)(T,{addPhotoUrl:e}))),(0,h.jsx)(b.default,{autoProgressionDelay:o.length>a?7e3:0,itemSpacing:2,hideControls:0===t,scrollOffset:l},d)};var M=o(574758),N=o(685255),B=o(86896),R=o(279618);const F=({addPhotoUrl:e,mediaThumbnails:a,mediaTotal:o,votingCsrfToken:i,seeAllUrl:s,businessId:n,locale:r})=>{const[d,c]=(0,t.useState)(void 0),[m,b]=(0,t.useState)(!1),p=(0,R.CB)(n),v=()=>{b(!0),p("lightbox/view","all")},_=()=>{c(void 0),b(!1)},x={onClose:_,onVote:(e,a)=>(0,M.Z)(e,n,a,i),logChangePhotoTab:e=>{p("lightbox/tab_selected",e)},logPhotoSearch:e=>{p("lightbox/search",e)},logMediaItemView:e=>{p("photo/view",e.id,{source:"media_showcase"})}},f=o>0?{isExternalLink:!1,linkIcon:(0,h.jsx)(u,null),linkText:(0,g.ag)("See all %{mediaCount} photos",{mediaCount:o}),linkTextSize:"large",linkUrl:s,onClick:v}:null,C=(0,B.Z)(_);return(0,h.jsx)(N.Z,{title:(0,g.ag)("Photos & videos"),linkProps:f},(0,h.jsx)(l.Z,{"data-testid":"mediaShowcase"},(0,h.jsx)(H,{addPhotoUrl:e,mediaScreenLimit:4,mediaThumbnails:a,mediaTotal:o,seeAllUrl:s,onClickPhoto:e=>c(a[e].nodeId),seeAllOnClickHandler:v}),d&&(0,h.jsx)(C,{businessId:n,mediaLightboxInternalProps:x,targetMediaItemNodeId:d,locale:r,enableHistory:!0}),m&&(0,h.jsx)(C,{businessId:n,mediaLightboxInternalProps:x,targetMediaItemNodeId:o>1?"":a[0].nodeId,locale:r,enableHistory:!0})))};var $=o(767982),V=o(155762),W=o(159044),K=o(921610),G=o(923407),Q=o(182145);const q=Q.ZP`
    query GetMediaShowcaseData($BizEncId: String) {
        business(encid: $BizEncId) {
            encid
            name
            location {
                encid
                country {
                    code
                }
                address {
                    city
                    regionCode
                }
            }

            media {
                businessOwnerVideo {
                    thumbnailUrl
                    id
                    encid
                }

                orderedMediaItems(first: 25) {
                    totalCount
                    edges {
                        node {
                            __typename
                            ... on BusinessPhoto {
                                id
                                encid
                                photoUrl {
                                    url(size: SQUARE_LARGE)
                                }
                                height
                                width
                                caption
                            }

                            ... on BusinessVideo {
                                id
                                encid
                                thumbnailUrl
                                caption
                            }
                        }
                    }
                }
            }
        }

        votingCsrfToken: csrfToken(scope: "biz_photos_vote_form")
    }
`,J=Q.ZP`
    query GetMediaShowcaseDataWithMetadata($BizEncId: String, $altTextCoverageCohort: String!) {
        business(encid: $BizEncId) {
            encid
            name
            reviewCount
            location {
                encid
                country {
                    code
                }
                address {
                    addressLine1
                    addressLine2
                    addressLine3
                    city
                    regionCode
                    postalCode
                }
            }

            media {
                businessOwnerVideo {
                    thumbnailUrl
                    id
                    encid
                }

                orderedMediaItems(first: 25) {
                    totalCount
                    edges {
                        node {
                            __typename
                            ... on BusinessPhoto {
                                id
                                encid
                                photoUrl {
                                    url: url(size: LARGE)
                                    thumbnail: url(size: SQUARE_180)
                                }
                                height
                                width
                                caption
                                metadata {
                                    aggregateRating
                                    author
                                    encodingFormat
                                    isFamilyFriendly
                                    isAttachedToReview
                                    keywords
                                    uploadDate {
                                        utcDateTime
                                    }
                                    expandedCoverageAltText(altTextCoverageCohort: $altTextCoverageCohort)
                                }
                            }

                            ... on BusinessVideo {
                                id
                                encid
                                thumbnailUrl
                                caption
                            }
                        }
                    }
                }
            }
        }

        votingCsrfToken: csrfToken(scope: "biz_photos_vote_form")
    }
`,X=({businessId:e,locale:a,onUpdateHistory:o,areWebpImagesEnabled:t,isImageObjectSchemaEnabled:n,altTextCoverageCohort:l})=>{const{loading:c,error:m,data:u}=(0,s.aM)(n?J:q,{variables:{BizEncId:e,altTextCoverageCohort:l}});if(c)return(0,h.jsx)(V.Z,{uniqueKey:"mediaShowcase"});if(m)throw r()(m);const g=(0,$.Ii)(u.business.media.orderedMediaItems.edges.map((({node:e})=>e)),u.business.media.businessOwnerVideo,e,u.business.name,u.business.location,t,l);return(0,h.jsx)(i().Fragment,null,(0,h.jsx)(F,{addPhotoUrl:(0,K.Z)(e),mediaThumbnails:g,mediaTotal:u.business.media.orderedMediaItems.totalCount,seeAllUrl:`/biz_photos/${e}`,businessId:e,votingCsrfToken:u.votingCsrfToken,onUpdateHistory:o,locale:a}),n?(0,h.jsx)(W.Z,{name:"Media Showcase",bizId:e,bizName:u.business.name,bizAddress:{display:[u.business.location.address.addressLine1,u.business.location.address.addressLine2,u.business.location.address.addressLine3].filter(Boolean).join(", "),city:u.business.location.address.city,country:u.business.location.country?.code,state:u.business.location.address.regionCode,zip:u.business.location.address.postalCode},reviewCount:u.business.reviewCount,images:u.business.media.orderedMediaItems.edges.reduce(((e,a)=>{if(a.node&&a.node.metadata&&a.node.photoUrl){const{metadata:o,photoUrl:i}=a.node;e.push({aggregateRating:o.aggregateRating,author:o.author,description:(0,d.Z)(a.node.caption,o.expandedCoverageAltText,l),encodingFormat:o.encodingFormat,isFamilyFriendly:o.isFamilyFriendly,isAttachedToReview:o.isAttachedToReview,keywords:o.keywords,uploadDate:o.uploadDate?.utcDateTime,contentUrl:(0,G.b)(String(i.url),t),thumbnailUrl:(0,G.b)(String(i.thumbnail),t)})}return e}),[])}):null)}}}]);
//# sourceMappingURL=https://js-sourcemaps.yelpcorp.com/assets/public/MediaShowcaseGQL.yji-c7d37fd6cf2a69a10cfb.chunk.js.map