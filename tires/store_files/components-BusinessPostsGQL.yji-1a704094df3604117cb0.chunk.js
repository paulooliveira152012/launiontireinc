(globalThis.__LOADABLE_LOADED_CHUNKS__=globalThis.__LOADABLE_LOADED_CHUNKS__||[]).push([[94629],{61967:e=>{e.exports={"post-carousel":"post-carousel__09f24__D6D4w"}},553181:e=>{e.exports={"modal-content":"modal-content__09f24__UP40P","video-post-container":"video-post-container__09f24__YQmzz",video:"video__09f24__Fw1aH"}},828821:e=>{e.exports={"carousel-post-headline":"carousel-post-headline__09f24__ncGci","carousel-post":"carousel-post__09f24__jkrlS","carousel-post-image":"carousel-post-image__09f24__ODMrB","video-icon":"video-icon__09f24__aRzd7","video-overlay":"video-overlay__09f24__slNgH"}},227888:e=>{e.exports={"modal-content":"modal-content__09f24__OkcCQ","empty-post-image":"empty-post-image__09f24__jTSl5"}},598819:e=>{e.exports={"button-container":"button-container__09f24___G0ic","badge-container":"badge-container__09f24___4DY8"}},350145:e=>{e.exports={"carousel-business-avatar":"carousel-business-avatar__09f24__zx_f3","carousel-modal-sidebar":"carousel-modal-sidebar__09f24__awmZW","carousel-business-name":"carousel-business-name__09f24__jnlkb","carousel-modal-footer":"carousel-modal-footer__09f24__B6HDK"}},536159:e=>{e.exports={gallery:"gallery__09f24__b4OUD","gallery-photo":"gallery-photo__09f24__J3Nsj","gallery-arrow":"gallery-arrow__09f24__JRxHm","gallery-arrow--disabled":"gallery-arrow--disabled__09f24__K6Pck","gallery-arrow--left":"gallery-arrow--left__09f24__ZPckq","gallery-arrow--right":"gallery-arrow--right__09f24__xJeUR","gallery-preview":"gallery-preview__09f24__KgE5J","gallery-thumbnail-container":"gallery-thumbnail-container__09f24__U7dWO","gallery-photo-overlay":"gallery-photo-overlay__09f24__ik0Ad"}},469387:e=>{e.exports={"gallery-thumbnail":"gallery-thumbnail__09f24__lWNq3","gallery-thumbnail--active":"gallery-thumbnail--active__09f24__HuN4e"}},631007:e=>{e.exports={navLink:"navLink__09f24__QS3DN",navLinkIcon:"navLinkIcon__09f24__agflL",previous:"previous__09f24__IGdfV",next:"next__09f24__OXS4X"}},760110:e=>{e.exports={navLink:"navLink__09f24__inxOu",previous:"previous__09f24__Y2jWJ",navLinkIcon:"navLinkIcon__09f24__trzrK",next:"next__09f24__zjQyr"}},472033:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});s(87363);var o=s(657633),n=s(731709);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},i.apply(this,arguments)}const a=function(e){return(0,n.jsx)(o.Z,i({svg:'<svg width="24" height="24" class="icon_svg"><path d="M20.63 2.034c-3.901-1.601-5.908-.677-7.678.14-1.851.854-3.601 1.662-8.08-.143a.93.93 0 0 0-.141-.025.992.992 0 0 0-1.981.094v19.8a1 1 0 1 0 2 0v-5.86c1.506.61 3.107.95 4.73 1.005a9.519 9.519 0 0 0 4.31-1.129c1.668-.769 2.987-1.373 6.08-.106a.999.999 0 0 0 1.38-.924V2.959a1 1 0 0 0-.62-.925Zm-1.38 11.439a7.847 7.847 0 0 0-6.298.627c-1.852.855-3.602 1.663-8.08-.142a.954.954 0 0 0-.122-.022V4.123c4.837 1.794 7.07.776 9.04-.133a5.994 5.994 0 0 1 5.46-.345v9.828Z"/></svg>',name:"24x24_flag_v2",v2:!0},e))}},324377:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});s(87363);var o=s(657633),n=s(731709);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},i.apply(this,arguments)}const a=function(e){return(0,n.jsx)(o.Z,i({svg:'<svg width="40" height="40" class="icon_svg"><path d="m27.444 19.21-9.83-7.636a1 1 0 0 0-1.614.79v15.272a1 1 0 0 0 1.613.79l9.831-7.636a1 1 0 0 0 0-1.58Z"/><path d="M20 37.667A17.667 17.667 0 1 1 37.667 20 17.688 17.688 0 0 1 20 37.667Zm0-33.334A15.667 15.667 0 1 0 35.667 20 15.685 15.685 0 0 0 20 4.333Z"/></svg>',name:"40x40_video_play_v2",v2:!0},e))}},842698:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>kt});var o=s(87363),n=s.n(o),i=s(882189),a=s(658690),r=s(469526),l=s(269703),c=s(129854),u=s(979186),d=s(68850);const g="REACTION_LIKE",p="VIEW";var _=s(61967),h=s.n(_),m=s(90553),f=s(626890),v=s(324377);const b=(e,t,s)=>`${e}${s}${t}`,x=["。","，","、","\t","\n","\v","\f","\r"," "];var y=s(828821),j=s.n(y),k=s(731709);const w=({onClick:e,post:t,shouldDisplaySinglePostUI:s})=>{const{description:o,headline:n,image:i}=t,a=s?130:53,r=function(e,t){let s=0,o=0;const n=Math.min(e.length,t);for(;s<n&&o<t;)"\n"===e[s]?o+=75:o+=1,s+=1;if(s===e.length)return e;const i=e.slice(0,s);let a=Math.min(i.length,t)-1;for(;a>=0&&!x.includes(i[a]);)a-=1;if(a<0)return`${i}…`;for(;a>=0&&x.includes(i[a]);)a-=1;return`${i.slice(0,a+1)}…`}(function(e){const t=e.trim();if(!t.includes("\r\n"))return t;const s=[];let o=0;return t.split("\r\n").forEach((e=>{""===e?o+=1:(o>1?s.push("\n\n"):o>0&&s.push("\n"),o=1,s.push(e))})),s.join("")}(o),a),c=r.length+1<o.length,g=t.media?.find((e=>"video"===e.type&&"active"===e.state&&null!==e.urlPrefix))||null;return(0,k.jsx)(u.Z,{bordered:!0,className:j()["carousel-post"],onClick:e},(0,k.jsx)(u.Z,{className:j()["carousel-post-image"]},g&&(0,k.jsx)(u.Z,{className:j()["video-icon"],"data-testid":"video-icon"},(0,k.jsx)(v.Z,{noAlign:!0,color:"white"})),(0,k.jsx)(f.Z,{showOverlay:null!==g,className:j()["video-overlay"],type:"solid-component"},(0,k.jsx)(m.default,{src:b(i.urlPrefix,i.urlSuffix,"ms"),srcSet:b(i.urlPrefix,i.urlSuffix,"ms"),altText:n,height:130,width:130}))),(0,k.jsx)(u.Z,{padding:2},(0,k.jsx)(u.Z,{className:j()["carousel-post-headline"]},(0,k.jsx)(d.Heading,{level:5},n)),(0,k.jsx)(u.Z,{marginTop:1},c?(0,k.jsx)(d.Text,null,r,(0,k.jsx)(d.Text,{color:"teal-dark",inline:!0}," ",(0,l.ag)("read more"))):(0,k.jsx)(d.Text,null,o))))};var P=s(421518),I=s(473550),C=s.n(I),Z=s(858642),D=s(529977),L=s(232139),S=s(631007),N=s.n(S),U=s(760110),T=s.n(U);const A="previous",O="next",M=({onClick:e,direction:t})=>{const s=(0,o.useContext)(L.default),n=s.v2_enabled?T():N(),i={[A]:n.previous,[O]:n.next},a={[A]:Z.Z,[O]:D.Z}[t],r=s.v2_enabled?"black-regular":"white";return(0,k.jsx)(d.LegacyLink,{href:"#",handleClick:t=>{t.preventDefault(),e()},className:C()(n.navLink,i[t]),role:"button"},(0,k.jsx)(a,{color:r,className:n.navLinkIcon}))},B=({onClickNext:e,onClickPrevious:t,showNext:s,showPrevious:o})=>(0,k.jsx)(n().Fragment,null,o&&(0,k.jsx)(M,{onClick:t,direction:A}),s&&(0,k.jsx)(M,{onClick:e,direction:O}));var R=s(999052),z=s(657633);function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},$.apply(this,arguments)}const E=function(e){return(0,k.jsx)(z.Z,$({svg:'<svg width="48" height="48" class="icon_svg"><path d="M29.414 5.992c.566 0 1.137.192 1.614.588 1.115.925 1.296 2.613.404 3.77l-10.53 13.649 10.53 13.65c.892 1.157.711 2.845-.404 3.77-1.116.925-2.743.738-3.635-.419L15.571 25.675a2.76 2.76 0 0 1 0-3.351L27.393 6.999a2.548 2.548 0 0 1 2.021-1.007z"/></svg>',name:"48x48_chevron_left"},e))};function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},q.apply(this,arguments)}const V=function(e){return(0,k.jsx)(z.Z,q({svg:'<svg width="48" height="48" class="icon_svg"><path d="M18.586 42.008a2.518 2.518 0 0 1-1.614-.588c-1.115-.925-1.296-2.613-.404-3.77l10.53-13.649-10.53-13.65c-.892-1.157-.711-2.845.404-3.77 1.116-.925 2.743-.738 3.635.419l11.822 15.325a2.76 2.76 0 0 1 0 3.351L20.607 41.001a2.548 2.548 0 0 1-2.021 1.007z"/></svg>',name:"48x48_chevron_right"},e))};var J=s(560791),K=s(567415),H=s(452138),W=s(675033),F=s(536159),G=s.n(F),Q=s(469387),Y=s.n(Q);const X=({photo:e,activePhotoId:t,onClick:s})=>(0,k.jsx)(J.Z,{className:C()([Y()["gallery-thumbnail"],{[Y()["gallery-thumbnail--active"]]:e.id===t}]),display:"inline-block",style:{backgroundImage:`url(${e.thumbnailUrl?e.thumbnailUrl:e.largeUrl})`},onClick:()=>s(e)}),ee=({photos:e,activePhotoId:t,onPhotoChange:s,showThumbnails:n=!1,showDateOverlay:i=!1,showUserAttribution:a=!1,galleryRef:r})=>{const c=(0,o.useContext)(L.default),u=t||e[0].id,g=e.find((e=>e.id===u)),p=g.userDisplayName,_=e.findIndex((e=>e.id===u)),h=e=>{s(e.id)},m=()=>{const t=e[Math.max(0,_-1)];t.id!==u&&s(t.id)},f=()=>{const t=e[Math.min(e.length-1,_+1)];t.id!==u&&s(t.id)},v={className:G()["gallery-photo"],style:{backgroundImage:`url(${g.largeUrl})`},role:"img","aria-label":g.caption};let b=(0,k.jsx)(J.Z,v);return g.isBeforePhoto&&(b=(0,k.jsx)(W.Z,null,(0,k.jsx)(J.Z,v))),(0,k.jsx)(J.Z,{className:G().gallery,tabIndex:"0",onKeyDown:e=>{e.preventDefault(),"ArrowLeft"===e.key?m():"ArrowRight"===e.key&&f()},tagRef:r},(0,k.jsx)(J.Z,{className:G()["gallery-preview"]},c.v2_enabled&&(0,k.jsx)(B,{onClickNext:f,onClickPrevious:m,showNext:_<e.length-1,showPrevious:_>0}),!c.v2_enabled&&(0,k.jsx)(J.Z,{className:C()([G()["gallery-arrow"],G()["gallery-arrow--left"],{[G()["gallery-arrow--disabled"]]:0===_}]),paddingLeft:1,onClick:m},(0,k.jsx)(E,{color:"white"})),b,!c.v2_enabled&&(0,k.jsx)(J.Z,{className:C()([G()["gallery-arrow"],G()["gallery-arrow--right"],{[G()["gallery-arrow--disabled"]]:_===e.length-1}]),paddingRight:1,onClick:f},(0,k.jsx)(V,{color:"white"})),i&&g.formattedTimeCreated||a&&p?(0,k.jsx)(J.Z,{className:G()["gallery-photo-overlay"],padding:2},(0,k.jsx)(K.Z,null,(0,k.jsx)(H.Z,{fill:!0},i&&g.formattedTimeCreated&&(0,k.jsx)(d.LegacyText,{color:"white",size:"small"},(0,l.ag)("Photo added on %{date}",{date:g.formattedTimeCreated}))),a&&p?(0,k.jsx)(H.Z,{nowrap:!0},(0,k.jsx)(d.LegacyText,{size:"small",color:"white"},(0,k.jsx)(R.Z,null,(0,l.ag)("Photo by <strong>%{userDisplayName}</strong>",{userDisplayName:p})))):null)):null),n?(0,k.jsx)(J.Z,{overflow:"scrollx"},(0,k.jsx)(J.Z,{className:G()["gallery-thumbnail-container"],padding:2},e.map((e=>(0,k.jsx)(X,{key:e.id,photo:e,activePhotoId:u,onClick:h}))))):null)};var te=s(765956),se=s(90627),oe=s(352420),ne=s(561060),ie=s(445316);const ae=(0,l.ag)("s"),re=(0,l.ag)("m"),le=(0,l.ag)("h"),ce=(0,l.ag)("d"),ue=(0,l.ag)("mo"),de=(0,l.ag)("y"),ge=e=>{const t=86400,s=Math.floor((Date.now()-e)/1e3);let o=s/31536e3;return o>=1?Math.floor(o)+de:(o=s/2592e3,o>=1?Math.floor(o)+ue:(o=s/t,o>=1?Math.floor(o)+ce:(o=s/3600,o>=1?Math.floor(o)+le:(o=s/60,o>=1?Math.floor(o)+re:s+ae))))};var pe=s(350145),_e=s.n(pe),he=s(472033);const me=function(e){return(0,k.jsx)(he.Z,e)};var fe=s(61853),ve=s(510832);const be=o.createContext({}),xe=({businessId:e,children:t,currentUserId:s})=>(0,k.jsx)(be.Provider,{value:{businessId:e,currentUserId:s}},t);var ye=s(682642);const je=e=>(0,k.jsx)(u.Z,{"data-testid":"confirmation-success"},(0,k.jsx)(u.Z,{marginTop:2,marginBottom:3},(0,k.jsx)(d.Text,null,(0,l.ag)("Thanks! We'll take a look to see if we agree that this is outside of our guidelines. This process may take several days and our Support team will contact you if we need more information."))),(0,k.jsx)(u.Z,null,(0,k.jsx)(ye.Z,{type:"secondary",onClick:e.handleDismissClick},(0,l.ag)("OK")))),ke=e=>(0,k.jsx)(o.Fragment,null,(0,k.jsx)(u.Z,{marginTop:2,marginBottom:3},(0,k.jsx)(d.Text,null,(0,l.ag)("Please refer to our "),(0,k.jsx)(d.Link,{href:"/guidelines",target:"_blank"},(0,l.ag)("Content Guidelines")),(0,l.ag)(" and "),(0,k.jsx)(d.Link,{href:"/static?p=tos",target:"_blank"},(0,l.ag)("Terms of Service")),(0,l.ag)(" and let us know if you think the content you’ve reported may violate these guidelines."))),(0,k.jsx)(se.Z,{gutter:1},(0,k.jsx)(oe.Z,null,(0,k.jsx)(ye.Z,{type:"primary",onClick:e.confirmFlagClick,disabled:e.disabled},(0,l.ag)("Report this post"))),(0,k.jsx)(oe.Z,{fill:!0,align:"left"},(0,k.jsx)(ye.Z,{type:"secondary",onClick:e.handleDismissClick},(0,l.ag)("Cancel"))))),{default:we,themes:Pe}=s(232139);class Ie extends o.Component{state={disabled:!1,hasError:!1,postReported:!1};static contextType=be;confirmFlagClick=()=>{if(this.setState({disabled:!0,hasError:!1}),this.context.currentUserId)try{this.props.bunsenJsLogger.logEvent(["yelp_connect","report_post","0.1"],{post_id_encid:this.props.postId,business_id_encid:this.context.businessId}),this.setState({postReported:!0})}catch(e){this.setState({disabled:!1,hasError:!0})}else window.location.href=`/login?return_url=/biz/${this.context.businessId}`};render(){return(0,k.jsx)(we.Provider,{value:Pe.v2},(0,k.jsx)(te.default,{reserveTitleSpacing:!1,size:"small",title:(0,l.ag)("Report post"),onClose:this.props.handleDismissClick,visible:!0},this.state.hasError&&(0,k.jsx)(ve.Z,{type:"error",priority:"high"},(0,l.ag)("Oops, there was a problem flagging this content. Please try again later.")),this.state.postReported?(0,k.jsx)(je,{handleDismissClick:this.props.handleDismissClick}):(0,k.jsx)(ke,{confirmFlagClick:this.confirmFlagClick,disabled:this.state.disabled,handleDismissClick:this.props.handleDismissClick})))}}const Ce=(0,r.et)(Ie);class Ze extends o.Component{state={displayConfirmationModal:!1};toggleConfirmationModal=()=>{this.setState((e=>({displayConfirmationModal:!e.displayConfirmationModal})))};render(){return(0,k.jsx)(o.Fragment,null,this.state.displayConfirmationModal&&(0,k.jsx)(Ce,{handleDismissClick:this.toggleConfirmationModal,postId:this.props.postId}),(0,k.jsx)(fe.Z,{tooltipDirection:"left",tooltipText:(0,l.ag)("Report post")},(0,k.jsx)(ne.Z,{icon:me,onClick:this.toggleConfirmationModal})))}}const De=Ze;var Le=s(428121);const Se=function(e){return(0,k.jsx)(Le.Z,e)},Ne={undefined:(0,l.ag)("Learn more"),learn_more:(0,l.ag)("Learn more"),view_business:(0,l.ag)("Return to business"),call_now:(0,l.ag)("Return to business"),message_business:(0,l.ag)("Message business"),raq:(0,l.ag)("Request a quote"),get_directions:(0,l.ag)("Get directions"),visit_website:(0,l.ag)("Visit website"),view_photos:(0,l.ag)("View photos"),view_menu:(0,l.ag)("View menu"),order_delivery:(0,l.ag)("Order delivery"),order_takeout:(0,l.ag)("Order takeout"),see_portfolio:(0,l.ag)("See portfolio"),view_hours:(0,l.ag)("View hours"),find_a_table:(0,l.ag)("Find a table"),view_attachment:(0,l.ag)("View attachment"),order_now:(0,l.ag)("Order now"),make_reservation:(0,l.ag)("Make reservation"),book_a_table:(0,l.ag)("Book a table"),buy_now:(0,l.ag)("Buy now"),schedule_now:(0,l.ag)("Schedule now"),get_offer:(0,l.ag)("Get offer"),get_quote:(0,l.ag)("Get quote"),view_more_photos:(0,l.ag)("View more photos"),contact_an_agent:(0,l.ag)("Contact an agent"),request_a_consultation:(0,l.ag)("Request consultation"),request_information:(0,l.ag)("Request information"),request_an_appointment:(0,l.ag)("Request appointment"),view_external_menu:(0,l.ag)("View menu")},Ue="view_business",Te="call_business",Ae={custom_url:"link_cta_click",[Ue]:"view_business_cta_click",[Te]:"call_business_cta_click",message_business:"message_business_cta_click",raq:"request_a_quote_cta_click",get_directions:"get_directions_cta_click",visit_website:"visit_website_cta_click",view_photos:"view_photos_cta_click",view_menu:"view_menu_cta_click",order_delivery:"order_delivery_cta_click",order_takeout:"order_takeout_cta_click",see_portfolio:"see_portfolio_cta_click",view_hours:"view_hours_cta_click",rez:"find_a_table_cta_click",file_attachment:"file_attachment_cta_click"},Oe="biz_page";var Me=s(136655),Be=s(982985);const Re=(e,t)=>`https://www.yelp.com/biz/${e}?${(0,Be.Z)(t)}`,ze=(e,t)=>Re(e,{post_id:t,utm_medium:"copy_link",utm_source:"biz_post_share"}),$e=(e,t)=>`https://www.facebook.com/sharer/sharer.php?u=${Re(e,{post_id:t,utm_medium:"social",utm_source:"facebook.com"})}`,Ee=(e,t)=>{const s={url:Re(e,{post_id:t,utm_medium:"social",utm_source:"twitter.com"}),text:"Check out update from this business on Yelp"};return`https://twitter.com/share?${(0,Be.Z)(s)}`};function qe({visible:e,businessId:t,postId:s,onModalClose:o,bunsenJsLogger:n}){if(!e)return null;return(0,k.jsx)(Me.Z,{contentType:"connect_post",facebookUrl:$e(t,s),twitterUrl:Ee(t,s),shareUrl:ze(t,s),onClose:o,onSocialButtonClick:e=>(e=>{n.logEvent(["yelp_connect","share_post_tapped","0.2"],{post_id:s,business_id:t,type:"method_tapped",page:Oe,method:e})})(e)})}const Ve=[Ue,Te],Je=({activePost:e,bunsenJsLogger:t,businessId:s,likeButton:n,onModalClose:i,logPostView:a})=>{const[r,l]=o.useState(!1),c=o=>{t.logEvent(["yelp_connect","post_action","0.1"],{post_id_encid:e.id,business_id_encid:s,channel:"web",page:Oe,action_type:Ae[o]})};return(0,k.jsx)(se.Z,{gutter:0},(0,k.jsx)(oe.Z,{fill:!0,paddingTop:3,paddingBottom:3,paddingLeft:3,paddingRight:2},e.linkUrl&&!Ve.includes(e.ctaAction)&&(0,k.jsx)(ye.Z,{full:!0,testId:"cta-button",tagType:"link",type:"primary",href:e.linkUrl,target:"_blank",onClick:()=>{c(e.ctaAction),a(e.id)},aria:{role:"link"}},Ne[e.ctaLabel]),Ve.includes(e.ctaAction)&&(0,k.jsx)(ye.Z,{full:!0,testId:"cta-button",type:"primary",onClick:()=>{c(e.ctaAction),i()}},Ne[e.ctaLabel])),n&&(0,k.jsx)(oe.Z,{paddingTop:3,paddingBottom:3,paddingRight:1},n),(0,k.jsx)(oe.Z,{paddingTop:3,paddingRight:3},(0,k.jsx)(ne.Z,{icon:Se,color:"black-regular","data-testid":"share-post-button",onClick:()=>{t.logEvent(["yelp_connect","share_post_tapped","0.2"],{post_id:e.id,business_id:s,type:"button_tapped",page:Oe}),l(!0)}})),(0,k.jsx)(qe,{visible:r,businessId:s,postId:e.id,onModalClose:()=>l(!1),bunsenJsLogger:t}))},Ke=({activePost:e,bunsenJsLogger:t,businessAvatar:s,businessId:o,businessName:n,likeButton:i,onModalClose:a,logPostView:r})=>{const c=e.image.bizPhoto;return(0,k.jsx)(u.Z,{"data-testid":"post-sidebar",className:_e()["carousel-modal-sidebar"]},(0,k.jsx)(u.Z,{paddingLeft:3,paddingTop:3},(0,k.jsx)(u.Z,{paddingRight:3},(0,k.jsx)(se.Z,{gutter:0},(0,k.jsx)(oe.Z,{fill:!0,align:"right"},(0,k.jsx)(De,{postId:e.id})),(0,k.jsx)(oe.Z,null,(0,k.jsx)(ne.Z,{icon:ie.Z,color:"black-regular",onClick:a}))),(0,k.jsx)(se.Z,{gutter:1,verticalAlign:"middle"},(0,k.jsx)(oe.Z,null,(0,k.jsx)(m.default,{src:b(s.urlPrefix,s.urlSuffix,"ss"),width:30,height:30,className:_e()["carousel-business-avatar"]})),(0,k.jsx)(oe.Z,{className:_e()["carousel-business-name"]},(0,k.jsx)(d.Text,{truncated:!0,weight:"semibold"},n)),(0,k.jsx)(oe.Z,{fill:!0},(0,k.jsx)(d.Text,{align:"left",color:"black-light"},ge(new Date(1e3*(e.eventStartDate?e.eventStartDate:e.created))))))),(0,k.jsx)(u.Z,{marginTop:2,paddingBottom:2,overflow:"scrolly",dangerouslySetInlineStyle:{height:"386px"},paddingRight:3},(0,k.jsx)(u.Z,{marginBottom:1},(0,k.jsx)(d.Heading,{level:4},e.headline)),(0,k.jsx)(d.Text,{size:"large"},e.linkUrl&&e.ctaAction===Te?e.description.concat("\n\n",(0,l.ag)("Call %{phone_number}",{phone_number:e.linkUrl.substr(4)}).toString()):e.description),c&&(0,k.jsx)(u.Z,{paddingTop:1},(0,k.jsx)(d.Text,{size:"small",color:"black-light"},(0,k.jsx)(d.Link,{href:(g=o,p=c.id,`/biz_photos/${g}/?select=${p}`),color:"inherit",size:"inherit"},(0,l.ag)("Photo from %{contributor}",{contributor:c.contributor})))))),(0,k.jsx)(u.Z,{shadowType:"overlay",className:_e()["carousel-modal-footer"]},(0,k.jsx)(Je,{activePost:e,bunsenJsLogger:t,businessId:o,onModalClose:a,likeButton:i,logPostView:r})));var g,p};var He=s(553181),We=s.n(He),Fe=s(978215);function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},Ge.apply(this,arguments)}const Qe=function(e){return(0,k.jsx)(z.Z,Ge({svg:'<svg width="24" height="24" class="icon_svg"><path d="M16.99 2A7.018 7.018 0 0 0 12 4.63 7.018 7.018 0 0 0 7.01 2C3.529 2 1 4.691 1 8.4c0 7.742 10.42 13.567 10.904 13.59a.997.997 0 0 0 .531-.124C12.867 21.63 23 15.946 23 8.4 23 4.691 20.472 2 16.99 2Z"/></svg>',name:"24x24_heart_filled_v2",v2:!0},e))};function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},Ye.apply(this,arguments)}const Xe=function(e){return(0,k.jsx)(z.Z,Ye({svg:'<svg width="24" height="24" class="icon_svg"><path d="M11.952 22a1 1 0 0 1-.487-.127C11.037 21.635 1 15.943 1 8.4 1 4.691 3.528 2 7.01 2A7.018 7.018 0 0 1 12 4.63 7.018 7.018 0 0 1 16.99 2C20.471 2 23 4.691 23 8.4 23 15.806 12.771 22 11.952 22ZM7.011 4C4.649 4 3 5.81 3 8.4c0 5.522 7.023 10.243 8.954 11.437C13.883 18.653 21 13.908 21 8.4 21 5.81 19.35 4 16.99 4c-2.332 0-4.129 2.769-4.146 2.796a1.001 1.001 0 0 1-.843.463h-.003a1.002 1.002 0 0 1-.843-.464C11.14 6.769 9.342 4 7.011 4Z"/></svg>',name:"24x24_heart_v2",v2:!0},e))};var et=s(598819),tt=s.n(et);const st=({activePost:e,bunsenJsLogger:t,businessId:s,deletePostInteraction:o,insertPostInteraction:n,onClick:i})=>(0,k.jsx)(u.Z,{"data-testid":"like-button",className:tt()["button-container"]},(0,k.jsx)(ne.Z,{icon:e.likeState?Qe:Xe,color:"black-regular",onClick:()=>{const a=!e.likeState,r={...e,likeState:a,likeCount:a?e.likeCount+1:e.likeCount-1};i(r),a?n({variables:{input:{event:g,platform:"WWW",postEncId:r.id,sourceDescription:"www"}}}):(e=>{o({variables:{input:{event:g,postEncId:e.id}}})})(r),(o=>{const n=o?"like|true":"like|false";t.logEvent(["yelp_connect","post_action","0.1"],{post_id_encid:e.id,business_id_encid:s,action_type:n,channel:"web",page:Oe})})(a)}}),e.likeCount>0&&(0,k.jsx)(u.Z,{className:tt()["badge-container"]},(0,k.jsx)(Fe.Z,{size:"small",value:e.likeCount})));class ot extends o.Component{componentDidMount(){this.galleryRef.current&&this.galleryRef.current.focus()}galleryRef=o.createRef();formatGalleryPhoto(e){return{id:e.id,largeUrl:b(e.image.urlPrefix,e.image.urlSuffix,"lo"),thumbnailUrl:"",caption:""}}onKeyDown=e=>{e.preventDefault(),"ArrowLeft"===e.key?this.prevPost():"ArrowRight"===e.key&&this.nextPost()};prevPost=()=>{const{activePostId:e,posts:t,onPhotoChange:s}=this.props,o=t.findIndex((t=>t.id===e)),n=t[Math.max(0,o-1)];n.id!==e&&s(n.id)};nextPost=()=>{const{activePostId:e,posts:t,onPhotoChange:s}=this.props,o=t.findIndex((t=>t.id===e)),n=t[Math.min(o+1,t.length-1)];n.id!==e&&s(n.id)};render(){const{activePostId:e,bunsenJsLogger:t,businessAvatar:s,businessId:o,businessName:n,currentUserId:i,deletePostInteraction:a,insertPostInteraction:r,posts:l,onModalClose:c,onPhotoChange:d,onLikeButtonClick:g,logPostView:p}=this.props,_=l.find((t=>t.id===e)),h=_.media?.find((e=>"video"===e.type&&"active"===e.state&&null!==e.urlPrefix))||null,m=l.findIndex((t=>t.id===e));return(0,k.jsx)(te.default,{reserveTitleSpacing:!1,simple:!0,width:1144,hideDismissButton:!0,onClose:c},(0,k.jsx)(u.Z,{className:We()["modal-content"],"data-testid":"modal-content"},h&&_?(0,k.jsx)(u.Z,{className:We()["video-post-container"],tagRef:this.galleryRef,onKeyDown:this.onKeyDown,"data-testid":"video-container"},(0,k.jsx)(B,{onClickNext:this.nextPost,onClickPrevious:this.prevPost,showNext:m!==l.length-1,showPrevious:0!==m}),(0,k.jsx)(P.nk,{id:"post-video",className:We().video,"data-testid":"post-video",src:`${h.urlPrefix}video.mp4`,autoPlay:!0,controls:!0,controlsList:"nodownload noplaybackrate",disablePictureInPicture:!0,muted:!0,loop:!1})):(0,k.jsx)(ee,{activePhotoId:e,photos:l.map((e=>this.formatGalleryPhoto(e))),onPhotoChange:d,galleryRef:this.galleryRef}),_&&(0,k.jsx)(Ke,{activePost:_,bunsenJsLogger:t,businessAvatar:s,businessId:o,businessName:n,onModalClose:c,likeButton:i?(0,k.jsx)(st,{activePost:_,bunsenJsLogger:t,businessId:o,deletePostInteraction:a,insertPostInteraction:r,onClick:g}):null,logPostView:p})))}}var nt=s(227888),it=s.n(nt);const at={id:"0",headline:"",description:"",eventStartDate:0,image:{bizPhoto:null,id:"1",urlPrefix:"",urlSuffix:""},created:0,ctaAction:"view_business",ctaLabel:"view_business",likeState:!1,likeCount:0},{default:rt,themes:lt}=s(232139),ct=({bunsenJsLogger:e,businessAvatar:t,businessHasPosts:s,businessId:o,businessName:n,onModalClose:i,logPostView:a})=>(0,k.jsx)(te.default,{reserveTitleSpacing:!1,simple:!0,width:1144,hideDismissButton:!0,onClose:i,visible:!0},(0,k.jsx)(u.Z,{className:it()["modal-content"]},(0,k.jsx)(u.Z,{className:it()["empty-post-image"]}),(0,k.jsx)(Ke,{activePost:at,bunsenJsLogger:e,businessAvatar:t,businessName:n,businessId:o,onModalClose:i,likeButton:null,logPostView:a})),(0,k.jsx)(u.Z,null,(0,k.jsx)(rt.Provider,{value:lt.v2},(0,k.jsx)(te.default,{reserveTitleSpacing:!1,size:"small",title:"Post no longer available",onClose:i,visible:!0},s?(0,k.jsx)(d.Text,{size:"large"},(0,l.ag)("Here are some other posts from the same business.")):(0,k.jsx)(d.Text,{size:"large"},(0,l.ag)("Check back later for more updates from this business.")),(0,k.jsx)(u.Z,{marginTop:10,textAlign:"right"},(0,k.jsx)(ye.Z,{type:"primary",onClick:i},(0,l.ag)("Okay")))))));var ut=s(182145);const dt=ut.ZP`
    mutation InsertBusinessPostInteraction($input: InsertBusinessPostInteractionInput!) {
        insertBusinessPostInteraction(input: $input) {
            ... on InsertBusinessPostInteractionResult {
                success
                message
            }
        }
    }
`,gt=ut.ZP`
    mutation DeleteBusinessPostInteraction($input: DeleteBusinessPostInteractionInput!) {
        deleteBusinessPostInteraction(input: $input) {
            ... on DeleteBusinessPostInteractionResult {
                success
                message
            }
        }
    }
`,{default:pt,themes:_t}=s(232139),ht=({bunsenJsLogger:e,businessAvatar:t,businessId:s,businessName:n,currentUserId:a,isQueryPostActive:r,posts:g,queryPostId:_,querySource:m})=>{const[f,v]=(0,o.useState)(null),[b,x]=(0,o.useState)(!1),[y,j]=(0,o.useState)(null),[P,I]=(0,o.useState)(!1),[C,Z]=(0,o.useState)(g),[D]=(0,i.Db)(dt),[L]=(0,i.Db)(gt),S=(t,o)=>{if(P)return;const n=C.find((e=>e.id===t)).media?.find((e=>"video"===e.type&&"active"===e.state&&null!==e.urlPrefix));e.logEvent(["yelp_connect","post_view","0.2"],{post_id:t,business_id:s,source_action:o,page:Oe,component:"business_posts_carousel",video_played:!!n||null,open_time:y?(Date.now()-y)/1e3:0}),I(!0)},N=e=>{f&&S(f),v(e),j(e?Date.now():null),I(!1),e&&(e=>{a&&D({variables:{input:{event:p,platform:"WWW",postEncId:e,sourceDescription:"www"}}})})(e)};return(0,o.useEffect)((()=>{var t,o;C.length>0&&_&&r?(v(_),x(!1),j(Date.now())):_&&!r&&(x(!0),t=_,o=m,e.logEvent(["yelp_connect","post_view_error","0.1"],{post_id:t,business_id:s,error:"post_not_found",source_action:o,page:Oe}))}),[]),(0,k.jsx)(pt.Provider,{value:_t.v2},(0,k.jsx)(xe,{businessId:s,currentUserId:a},1===C.length&&(0,k.jsx)(w,{post:C[0],onClick:()=>{N(C[0].id)},shouldDisplaySinglePostUI:!0}),C.length>1&&(0,k.jsx)(c.default,{scrollOffset:426},C.map((e=>(0,k.jsx)(u.Z,{key:e.id,className:h()["post-carousel"]},(0,k.jsx)(w,{post:e,onClick:()=>{N(e.id)},shouldDisplaySinglePostUI:!1}))))),0===C.length&&_&&(0,k.jsx)(d.Text,{size:"large",color:"black-light"},(0,l.ag)("Check back later for new updates")),!b&&f&&(0,k.jsx)(ot,{bunsenJsLogger:e,businessAvatar:t,businessId:s,businessName:n,currentUserId:a,deletePostInteraction:L,insertPostInteraction:D,posts:C,activePostId:f,onModalClose:()=>N(),onPhotoChange:N,onLikeButtonClick:e=>{Z(C.map((t=>e.id===t.id?e:t)))},logPostView:S}),b&&(0,k.jsx)(ct,{bunsenJsLogger:e,businessAvatar:t,businessId:s,businessName:n,onModalClose:()=>(C.length>0&&(v(C[0].id),S(C[0].id)),void x(!1)),businessHasPosts:C.length>0,logPostView:S})))};var mt=s(685255);const ft=(0,r.et)((e=>{const{posts:t,queryPostId:s}=e;return 0!==t.length||s?(0,k.jsx)(mt.Z,{title:(0,l.ag)("Updates From This Business")},(0,k.jsx)(ht,e)):null})),vt=ut.ZP`
    fragment post on BusinessPost {
        encId
        eventStartDate {
            utcDateTime
        }
        image {
            encid
            photoUrl {
                urlPrefix
                urlSuffix
            }
        }
        created {
            utcDateTime
        }
        ctaAction
        ctaLabel
        description
        headline
        linkUrl
        media {
            ... on BusinessPostVideo {
                __typename
                encId
                urlPrefix
                state
            }
            ... on BusinessPostImage {
                __typename
                encId
                urlPrefix
                state
            }
        }
        reactionRundowns {
            type
            reacted
            count
        }
        bizPhotoAttribution {
            encid
            uploadingUser {
                encid
                displayName
            }
        }
    }
`,bt=ut.ZP`
    query GetBusinessPosts($encBizId: String, $hasUserId: Boolean!, $page: Int, $after: String) {
        business(encid: $encBizId) {
            encid
            name
            isConnectEnabled
            connectAvatar {
                encid
                photoUrl {
                    urlPrefix
                    urlSuffix
                }
            }
            userPosts(first: $page, after: $after) @include(if: $hasUserId) {
                edges {
                    node {
                        ...post
                    }
                }
            }
            nonDeletedPosts(first: $page, after: $after) @skip(if: $hasUserId) {
                edges {
                    node {
                        ...post
                    }
                }
            }
        }
        loggedInUser @include(if: $hasUserId) {
            encid
        }
    }
    ${vt}
`;var xt=s(395203),yt=s(155762);function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},jt.apply(this,arguments)}const kt=e=>{const{businessId:t,requestUrl:s}=e,{isUserLoggedIn:o}=(0,xt.Ii)(),n="true"===(0,a.Z)()("yelp.www.biz_details.business_posts_carousel.www_video_playback.enabled"),{loading:r,data:l,error:c}=(0,i.aM)(bt,{variables:{encBizId:t,hasUserId:o,page:30,after:null}});if(r)return(0,k.jsx)(yt.Z,{uniqueKey:"BusinessPosts"});if(c||!l)return null;if(!l?.business?.isConnectEnabled)return null;const u=l.business[o?"userPosts":"nonDeletedPosts"].edges.map((e=>((e,t)=>{const s=e.reactionRundowns?.find((e=>"LIKE"===e.type));return{id:e.encId,eventStartDate:e.eventStartDate?.utcDateTime?Math.floor(Date.parse(e.eventStartDate.utcDateTime)/1e3):null,created:e.created?.utcDateTime?Math.floor(Date.parse(e.created.utcDateTime)/1e3):null,image:{bizPhoto:e.bizPhotoAttribution?{id:e.bizPhotoAttribution?.encid,contributor:e.bizPhotoAttribution?.uploadingUser?.displayName}:null,id:e?.image?.encid,urlPrefix:e?.image?.photoUrl?.urlPrefix,urlSuffix:e?.image?.photoUrl?.urlSuffix},ctaAction:e.ctaAction??"",ctaLabel:e.ctaLabel??"",description:e.description??"",headline:e.headline??"",linkUrl:e.linkUrl??"",media:t?e.media?.map((e=>({id:e.encId,state:e.state.toLowerCase(),type:"BusinessPostVideo"===e.__typename?"video":"image",urlPrefix:e.urlPrefix}))):[],likeCount:s?s.count:0,likeState:!!s&&s.reacted}})(e.node,n))),d=new URL(s).searchParams,g=d.get("post_id"),p=d.get("querySource"),_=!!g&&u.some((e=>e.id===g));return(0,k.jsx)(ft,jt({businessId:t},{businessAvatar:{bizPhoto:null,id:(h=l).business.connectAvatar.encid,urlPrefix:h.business.connectAvatar.photoUrl.urlPrefix,urlSuffix:h.business.connectAvatar.photoUrl.urlSuffix},businessName:h.business.name,currentUserId:h.loggedInUser?.encid||null},{posts:u,queryPostId:g,querySource:p,isQueryPostActive:_}));var h}}}]);
//# sourceMappingURL=https://js-sourcemaps.yelpcorp.com/assets/public/components-BusinessPostsGQL.yji-1a704094df3604117cb0.chunk.js.map