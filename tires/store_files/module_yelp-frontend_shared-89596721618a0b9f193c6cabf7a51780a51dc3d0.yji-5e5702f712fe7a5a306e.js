"use strict";(globalThis.__LOADABLE_LOADED_CHUNKS__=globalThis.__LOADABLE_LOADED_CHUNKS__||[]).push([[41478],{473457:(e,t,s)=>{s.d(t,{Z:()=>M});var n=s(87363),i=s.n(n),o=s(659258),u=s(731709),l=s(903895),g=s(428365),r=s(135566);const h="data-autocomplete-menu-item";var a={name:"79elbk",styles:"position:relative;"};class d extends i().Component{static defaultProps={getStringValueFromSuggestion:null,getSuggestionId:null,noResultsText:void 0,bottomSection:void 0,renderSuggestion:null,getSuggestionSelectability:()=>!0,shouldClearValueOnSelect:!1,shouldPersistDropdownOnBlur:!1,shouldPersistDropdownOnSubmit:!1,shouldShowPreviousResultsOnFocus:!1,shouldDisableSubmitOnEnter:!1,inputValue:null,onSubmit:()=>{},waitGetSuggestions:0,loadingComponent:null};constructor(e){super(e);const t=this.props.children.props.onChange?this.props.children.props.onChange:()=>{};this.state={inputValue:this.props.inputValue||this.props.children.props.value||"",originalOnChange:t,pendingSelection:null,pendingSelectionIndex:null,showSuggestionList:!1,suggestListHighlightIndex:null,showLoadingComponent:!1,suggestions:[],typedInputValue:""},this.handleFocus=this.handleFocus.bind(this),this.handleKeydown=this.handleKeydown.bind(this)}static getDerivedStateFromProps(e,t){return"string"==typeof e.inputValue&&e.inputValue!==t.inputValue?{...t,inputValue:e.inputValue,typedInputValue:e.inputValue}:null}debouncedGetSuggestions=(0,l.Z)((e=>{this.getSuggestions(e)}),this.props.waitGetSuggestions);containerRef=i().createRef();menuRef=i().createRef();clearPendingSelection=()=>{this.setState({pendingSelection:null,pendingSelectionIndex:null})};getInput=()=>{if(this.containerRef.current){const e=this.containerRef.current.querySelectorAll('[role="combobox"]');if(e.length&&"INPUT"===e[0].tagName)return e[0]}return null};getSuggestions=e=>(this.setState({showSuggestionList:!!this.props.loadingComponent,showLoadingComponent:!0}),this.props.getSuggestions(e).then((e=>{this.setState({showLoadingComponent:!1}),Array.isArray(e)?this.setState({showSuggestionList:!0,suggestions:e}):(console.error(`Expected the getSuggestions prop to return an Array, instead received ${typeof e}. Returning an empty array to prevent any errors from occurring.`),this.setState({showSuggestionList:!0,suggestions:[]}))})).catch((e=>{if(!(e instanceof g.Z))throw e})));getSuggestionValue=e=>this.props.getStringValueFromSuggestion?this.props.getStringValueFromSuggestion(e):"string"==typeof e?e:(console.error(`Expected a string suggestion value, instead received ${typeof e}. Implement the getStringValueFromSuggestion prop to convert your suggestion to a string.`),"");getSuggestionId=e=>this.props.getSuggestionId?this.props.getSuggestionId(e):this.getSuggestionValue(e);focusMenuItem=e=>{if(this.menuRef.current&&"number"==typeof e){const t=this.menuRef.current.querySelectorAll(`[${h}="true"]`);t&&t[e]&&t[e].focus()}};handleChange=e=>{this.setState({inputValue:e.currentTarget.value,pendingSelection:null,pendingSelectionIndex:null,suggestListHighlightIndex:null,typedInputValue:e.currentTarget.value}),this.debouncedGetSuggestions(e.currentTarget.value),this.state.originalOnChange(e)};handleEnterKey=e=>{(this.props.shouldDisableSubmitOnEnter||this.state.showSuggestionList)&&e.preventDefault(),this.selectItem(void 0,r.Z.KEYDOWN)};handleFocus=e=>{if(!this.state.showSuggestionList)if("function"==typeof this.props.children.props.onFocus&&this.props.children.props.onFocus(e),this.props.shouldShowPreviousResultsOnFocus&&e.currentTarget.value)this.state.suggestions.length?this.setState((e=>({pendingSelection:"number"==typeof e.suggestListHighlightIndex?e.suggestions[e.suggestListHighlightIndex]:null,pendingSelectionIndex:e.suggestListHighlightIndex,suggestListHighlightIndex:e.suggestListHighlightIndex,showSuggestionList:!0})),(()=>{this.focusMenuItem(this.state.suggestListHighlightIndex)})):this.debouncedGetSuggestions(e.currentTarget.value);else{const{currentTarget:t}=e;t.select&&t.select(),this.debouncedGetSuggestions("")}};handleKeydown=e=>{"ArrowUp"===e.key?(e.preventDefault(),this.selectPrevious()):"ArrowDown"===e.key?(e.preventDefault(),this.selectNext()):this.props.shouldPersistDropdownOnBlur||"Escape"!==e.key&&"Tab"!==e.key?"Enter"===e.key&&this.handleEnterKey(e):this.hide()};handleInputKeydown=e=>{["ArrowUp","ArrowDown"].includes(e.key)&&!this.state.showSuggestionList?this.debouncedGetSuggestions(this.state.inputValue):"Enter"===e.key&&(this.props.shouldDisableSubmitOnEnter&&e.preventDefault(),this.handleEnterKey(e))};handleClickOutside=e=>{!this.props.shouldPersistDropdownOnBlur&&e.target&&this.containerRef.current&&!this.containerRef.current.contains(e.target)&&this.hide()};handleMouseDown=e=>{this.selectItem(e,r.Z.MOUSEDOWN)};handleMouseLeave=()=>{this.clearPendingSelection()};handleMouseMove=e=>{this.setState((t=>{const s=t.suggestions[e];return this.props.getSuggestionSelectability(s)?{pendingSelection:s,pendingSelectionIndex:e}:{pendingSelection:null,pendingSelectionIndex:null}}))};hide=()=>{let e={pendingSelection:null,pendingSelectionIndex:null,showSuggestionList:!1};this.debouncedGetSuggestions.cancel(),this.props.shouldShowPreviousResultsOnFocus||(e={...e,suggestListHighlightIndex:null}),this.setState(e)};get selectableSuggestionIndices(){return Array.from(Array(this.state.suggestions.length).keys()).filter((e=>this.props.getSuggestionSelectability(this.state.suggestions[e])))}selectPrevious=()=>{const e=this.selectableSuggestionIndices;if(0!==e.length)if(null==this.state.pendingSelectionIndex){const t=e[e.length-1];this.selectPendingItem(t)}else{const t=e.reverse().find((e=>e<this.state.pendingSelectionIndex));if(null!=t)this.selectPendingItem(t);else{const t=this.getInput();t&&document.activeElement!==t?(t.focus(),this.clearPendingSelection()):this.selectPendingItem(e[0])}}};selectNext=()=>{const e=this.selectableSuggestionIndices;if(0!==e.length)if(null==this.state.pendingSelectionIndex)this.selectPendingItem(e[0]);else{const t=e.find((e=>e>this.state.pendingSelectionIndex));if(null!=t)this.selectPendingItem(t);else{const t=this.getInput();t&&document.activeElement!==t?(t.focus(),this.clearPendingSelection()):this.selectPendingItem(e[0])}}};selectPendingItem=e=>{this.focusMenuItem(e),this.setState((t=>{const s=t.suggestions[e];return{...t,pendingSelection:s,pendingSelectionIndex:e}}))};selectItem=(e,t)=>{let s={},n=this.state.pendingSelection;if("number"==typeof e&&(n=this.state.suggestions[e]),n){if(!this.props.getSuggestionSelectability(n))return;s={...s,inputValue:this.getSuggestionValue(n),suggestListHighlightIndex:"number"==typeof e?e:this.state.pendingSelectionIndex},this.props.onSelect(n,t)}else this.props.onSubmit(this.state.inputValue);this.props.shouldClearValueOnSelect&&(s={...s,inputValue:"",typedInputValue:""}),this.setState(s),this.props.shouldPersistDropdownOnSubmit&&!n||this.hide()};renderLoadingComponent(){const{loadingComponent:e}=this.props,{showLoadingComponent:t}=this.state;return e&&t?e:null}render(){const{suggestListComponent:e}=this.props;return(0,u.jsx)("div",{css:a,ref:this.containerRef},i().cloneElement(this.props.children,{ariaProps:{...this.props.children?.props?.ariaProps||void 0,role:"combobox","aria-autocomplete":"list","aria-expanded":this.state.showSuggestionList},onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleInputKeydown,value:this.state.inputValue,autoComplete:"off"}),this.state.showSuggestionList&&(0,u.jsx)(o.Z,{onClickAway:this.handleClickOutside},(0,u.jsx)(i().Fragment,null,(0,u.jsx)(e,{getSuggestionId:this.getSuggestionId,getSuggestionValue:this.getSuggestionValue,handleMouseLeave:this.handleMouseLeave,handleMouseMove:this.handleMouseMove,handleMouseDown:this.handleMouseDown,highlightedSuggestionIndex:this.state.suggestListHighlightIndex,noResultsText:this.props.noResultsText,bottomSection:this.props.bottomSection,loadingComponent:this.renderLoadingComponent(),suggestionList:this.state.suggestions,renderSuggestion:this.props.renderSuggestion,getSuggestionSelectability:this.props.getSuggestionSelectability,typedInputValue:this.state.typedInputValue,maxHeight:this.props.suggestListMaxHeight,pendingSelection:this.state.pendingSelection,menuRef:this.menuRef,handleKeyDown:this.handleKeydown}))))}}var p=s(172895),c=s(574430),S=s(554236),m=s(979186),y=s(68850),f=s(752720),x=s(833050),I=s(504433),v=s(471140);const w=({children:e,handleKeyDown:t,maxHeight:s,menuRef:n,onMouseLeave:o})=>(i().useEffect((()=>(document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)})),[t]),(0,u.jsx)(m.Z,{css:(0,u.css)("top:",(0,f.r$)(6),"px;position:absolute;width:100%;z-index:",(0,x.Z)(I.pr),";menu{overflow-y:auto;}"),onMouseLeave:o},(0,u.jsx)(p.default,{aria:{role:"listbox"},dangerouslySetInlineStyle:{maxHeight:`${s}px`},tagRef:n},e)));class b extends n.PureComponent{static defaultProps={noResultsText:void 0,bottomSection:void 0,renderSuggestion:void 0,maxHeight:430};state={isTouchMoving:!1};handleTouchEnd=(e,t)=>{e.preventDefault(),this.state.isTouchMoving?this.setState({isTouchMoving:!1}):this.props.handleMouseDown(t)};handleTouchMove=(e,t)=>{e.preventDefault(),this.props.handleMouseMove(t),this.state.isTouchMoving||this.setState({isTouchMoving:!0})};renderSuggestionListItems=()=>this.props.suggestionList.map(((e,t)=>{const s=this.props.pendingSelection===e,n=t===this.props.highlightedSuggestionIndex&&this.props.getSuggestionSelectability(e);return(0,u.jsx)(c.Z,{aria:{role:"option","aria-selected":n},key:this.props.getSuggestionId(e),onMouseMove:()=>this.props.handleMouseMove(t),onMouseDown:()=>this.props.handleMouseDown(t),onTouchEnd:e=>this.handleTouchEnd(e,t),onTouchMove:e=>this.handleTouchMove(e,t),isActive:n,isHighlighted:s&&!n,type:"button",[h]:"true"},this.props.renderSuggestion?this.props.renderSuggestion(e,n,this.props.typedInputValue):(0,u.jsx)(v.Z,{suggestion:this.props.getSuggestionValue(e),typedInputValue:this.props.typedInputValue}))}));renderNoResultsComponent=()=>{const{noResultsText:e,suggestionList:t}=this.props;if(t.length)return null;let s=null;return"string"==typeof e?s=(0,u.jsx)(y.Text,{color:"black-light"},e):i().isValidElement(e)&&(s=e),s?(0,u.jsx)(c.Z,{key:"noResults",isHighlighted:!1},s):null};renderBottomSectionComponent=()=>{const{bottomSection:e}=this.props;return i().isValidElement(e)?(0,u.jsx)(S.Z,{isBottomSection:!0},e):null};render(){const{handleKeyDown:e,handleMouseLeave:t,loadingComponent:s,maxHeight:n,menuRef:i}=this.props,o=this.renderSuggestionListItems(),l=this.renderNoResultsComponent(),g=this.renderBottomSectionComponent();return s?(0,u.jsx)(w,{handleKeyDown:e,maxHeight:n,menuRef:i,onMouseLeave:t},s,g):o.length||l?(0,u.jsx)(w,{handleKeyDown:e,maxHeight:n,menuRef:i,onMouseLeave:t},o,l,g):null}}const L=b;function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},V.apply(this,arguments)}const D=e=>(0,u.jsx)(d,V({},e,{suggestListComponent:L}));D.defaultProps={getStringValueFromSuggestion:null,getSuggestionId:null,renderSuggestion:null,getSuggestionSelectability:()=>!0,shouldClearValueOnSelect:!1,shouldPersistDropdownOnBlur:!1,shouldPersistDropdownOnSubmit:!1,shouldShowPreviousResultsOnFocus:!1,shouldDisableSubmitOnEnter:!1,inputValue:null,onSubmit:()=>{},waitGetSuggestions:0,loadingComponent:null};const M=D},471140:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(87363),i=s.n(n),o=s(68850),u=s(731709);const l=e=>{const t=e.suggestion.toLowerCase().indexOf(e.typedInputValue.toLowerCase());if(-1===t||!e.typedInputValue)return(0,u.jsx)(o.Text,{color:"inherit",inline:!0,weight:e.typedInputValue?void 0:"semibold"},e.suggestion);const s=t+e.typedInputValue.length;return(0,u.jsx)(i().Fragment,null,t>0&&(0,u.jsx)(o.Text,{color:"inherit",inline:!0},e.suggestion.substring(0,t)),(0,u.jsx)(o.Text,{color:"inherit",inline:!0,weight:"semibold"},e.suggestion.substring(t,t+e.typedInputValue.length)),s<e.suggestion.length&&(0,u.jsx)(o.Text,{color:"inherit",inline:!0},e.suggestion.substring(s)))}},135566:(e,t,s)=>{s.d(t,{Z:()=>n});const n={KEYDOWN:"KEYDOWN",MOUSEDOWN:"MOUSEDOWN"}},428365:(e,t,s)=>{s.d(t,{Z:()=>i});class n extends Error{}const i=n}}]);
//# sourceMappingURL=https://js-sourcemaps.yelpcorp.com/assets/public/module_yelp-frontend_shared-89596721618a0b9f193c6cabf7a51780a51dc3d0.yji-5e5702f712fe7a5a306e.js.map