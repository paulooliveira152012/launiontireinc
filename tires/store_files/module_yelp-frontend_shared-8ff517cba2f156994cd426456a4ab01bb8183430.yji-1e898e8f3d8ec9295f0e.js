"use strict";(globalThis.__LOADABLE_LOADED_CHUNKS__=globalThis.__LOADABLE_LOADED_CHUNKS__||[]).push([[73312],{274332:(e,n,o)=>{o.d(n,{BrowserRouter:()=>d});var t=o(508748),r=o(638620),i=o(87363),a=o.n(i),s=o(166781),l=o(840644),c=o(632944),u=o(447804),d=function(e){function n(){for(var n,o=arguments.length,t=new Array(o),r=0;r<o;r++)t[r]=arguments[r];return(n=e.call.apply(e,[this].concat(t))||this).history=(0,s.lX)(n.props),n}return(0,r.Z)(n,e),n.prototype.render=function(){return a().createElement(t.F0,{history:this.history,children:this.props.children})},n}(a().Component);a().Component;var p=function(e,n){return"function"==typeof e?e(n):e},g=function(e,n){return"string"==typeof e?(0,s.ob)(e,null,null,n):e},h=function(e){return e},f=a().forwardRef;void 0===f&&(f=h);var m=f((function(e,n){var o=e.innerRef,t=e.navigate,r=e.onClick,i=(0,c.Z)(e,["innerRef","navigate","onClick"]),s=i.target,u=(0,l.Z)({},i,{onClick:function(e){try{r&&r(e)}catch(n){throw e.preventDefault(),n}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),t())}});return u.ref=h!==f&&n||o,a().createElement("a",u)}));var y=f((function(e,n){var o=e.component,r=void 0===o?m:o,i=e.replace,d=e.to,y=e.innerRef,C=(0,c.Z)(e,["component","replace","to","innerRef"]);return a().createElement(t.s6.Consumer,null,(function(e){e||(0,u.Z)(!1);var o=e.history,t=g(p(d,e.location),e.location),c=t?o.createHref(t):"",m=(0,l.Z)({},C,{href:c,navigate:function(){var n=p(d,e.location),t=(0,s.Ep)(e.location)===(0,s.Ep)(g(n));(i||t?o.replace:o.push)(n)}});return h!==f?m.ref=n||y:m.innerRef=y,a().createElement(r,m)}))})),C=function(e){return e},w=a().forwardRef;void 0===w&&(w=C);w((function(e,n){var o=e["aria-current"],r=void 0===o?"page":o,i=e.activeClassName,s=void 0===i?"active":i,d=e.activeStyle,h=e.className,f=e.exact,m=e.isActive,x=e.location,v=e.sensitive,T=e.strict,k=e.style,b=e.to,j=e.innerRef,P=(0,c.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a().createElement(t.s6.Consumer,null,(function(e){e||(0,u.Z)(!1);var o=x||e.location,i=g(p(b,o),o),c=i.pathname,A=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),S=A?(0,t.LX)(o.pathname,{path:A,exact:f,sensitive:v,strict:T}):null,O=!!(m?m(S,o):S),Z="function"==typeof h?h(O):h,_="function"==typeof k?k(O):k;O&&(Z=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return n.filter((function(e){return e})).join(" ")}(Z,s),_=(0,l.Z)({},_,d));var R=(0,l.Z)({"aria-current":O&&r||null,className:Z,style:_,to:i},P);return C!==w?R.ref=n||j:R.innerRef=j,a().createElement(y,R)}))}))},566745:(e,n,o)=>{o.d(n,{xl:()=>x,zM:()=>w});var t=o(87363),r=o(182145),i=o(625198),a=o.n(i),s=o(631996),l=o(345596),c=o(882189),u=o(409206),d=o.n(u),p=o(731709);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},g.apply(this,arguments)}const h=(0,t.createContext)({ready:!1,signInWithApple:()=>{throw Error("Missing AppleApi context")},nonce:""}),f="https://yelp.com",m=new Set(["ar_SA","ca_ES","cs_CZ","da_DK","de_DE","el_GR","en_GB","en_US","es_ES","es_MX","fi_FI","fr_CA","fr_FR","hr_HR","hu_HU","id_ID","it_IT","iw_IL","ja_JP","ko_KR","ms_MY","nl_NL","no_NO","pl_PL","pt_BR","pt_PT","ro_RO","ru_RU","sk_SK","sv_SE","th_TH","tr_TR","uk_UA","vi_VI","zh_CN","zh_HK","zh_TW"]);const y={biz:r.ZP`
        query GetBizAppleAuthConfig($guv: String!) {
            thirdPartyConfig {
                appleAuth(platform: BIZ_WWW) {
                    clientId
                    teamId
                    nonce(guv: $guv)
                }
            }
        }
    `,consumer:r.ZP`
        query GetAppleAuthConfig($guv: String!) {
            thirdPartyConfig {
                appleAuth(platform: CONSUMER_WWW) {
                    clientId
                    teamId
                    nonce(guv: $guv)
                }
            }
        }
    `},C=({children:e,clientId:n,version:o="1",locale:r,redirectURI:i=f,scope:c="name email",state:u=null,guv:g,nonce:y,usePopup:C=!0})=>{const[w,x]=(0,t.useState)("undefined"!=typeof window&&window.initAppleSdkHappened||!1);(0,t.useEffect)((()=>{if(window.initAppleSdkHappened)return()=>{};const e=document.createElement("script");return e.src=function(e,n){return`https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/${e}/${m.has(n)?n:"en_US"}/appleid.auth.js`}(o,r),e.onload=()=>{(()=>{window.initAppleSdkHappened=!0;const e=d()("sha256").update(y).digest("hex");window.AppleID.auth.init({clientId:n,scope:c,state:u,redirectURI:i,usePopup:C,nonce:e}),x(!0)})()},a()(document.body,"document body should exist when AppleApiProvider is mounted"),document.body.appendChild(e),()=>{a()(document.body,"document body should exist when AppleApiProvider is unmounted"),document.body.removeChild(e)}}),[n,o,r,c,u,i,g,C,y]);return(0,p.jsx)(h.Provider,{value:{signInWithApple:async()=>{let e;try{e=await window.AppleID.auth.signIn()}catch(e){if(e.error&&"popup_closed_by_user"===e.error)return null;throw e}return(0,s.Z)({idToken:(0,l.Z)(e,"authorization.id_token"),firstName:(0,l.Z)(e,"user.name.firstName"),lastName:(0,l.Z)(e,"user.name.lastName"),code:(0,l.Z)(e,"authorization.code")})},ready:w,nonce:y}},e)},w=({userAccountType:e="consumer",guv:n,children:o,version:r="1",redirectURI:i=f,scope:a="name email",state:s=null,usePopup:l=!0,...u})=>{const{loading:d,error:h,data:m}=(0,c.aM)(y[e],{variables:{guv:n}});return d||h||!m?(0,p.jsx)(t.Fragment,null,o):(0,p.jsx)(C,g({},u,{version:r,redirectURI:i,scope:a,state:s,usePopup:l,guv:n,clientId:m.thirdPartyConfig.appleAuth.clientId,nonce:m.thirdPartyConfig.appleAuth.nonce}),o)},x=()=>(0,t.useContext)(h)},955621:(e,n,o)=>{o.d(n,{AT:()=>w,ne:()=>x});var t=o(87363),r=o(625198),i=o.n(r),a=o(182145),s=o(882189),l=o(798500),c=o(988617),u=o(180338),d=o(731709);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},p.apply(this,arguments)}const g=(0,t.createContext)({ready:!1,usingV2SDK:!1,getGoogleUserData:()=>{throw Error("Missing GoogleApi context")},showOneTap:()=>{throw Error("Missing GoogleApi context or not using V2 SDK")},hideOneTap:()=>{throw Error("Missing GoogleApi context or not using V2 SDK")}}),h=["https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile"],f={biz:"com.yelp.android.biz",consumer:"com.yelp.android"},m={biz:a.ZP`
        query GetBizGoogleApiData {
            thirdPartyConfig {
                googleAuth(platform: BIZ_SITE) {
                    clientId
                }
            }
        }
    `,consumer:a.ZP`
        query GetGoogleApiData {
            thirdPartyConfig {
                googleAuth(platform: WWW) {
                    clientId
                }
            }
        }
    `},y=({children:e,clientId:n,scopes:o,showOneTapOnload:r,onAuth:a,isGDPR:s,allowReload:p})=>{const[h,f]=(0,t.useState)(("undefined"!=typeof window&&window.initNewGoogleSdkHappened&&!p)??!1),[m,y]=(0,t.useState)("");(0,t.useEffect)((()=>{m&&document.getElementById("googleV2button")?.click()}),[m]);const C=t.useCallback((async()=>{if(s)return!1;const e=await new Promise((e=>{window.google.accounts.id.prompt((n=>{e(n)}))}));return e.isDisplayed()&&!e.isSkippedMoment()}),[s]);(0,t.useEffect)((()=>{const e=e=>{a?a(e.credential,e.select_by):y(e.credential)};if(!(0,l.ww)(l.vy.FUNCTIONAL))return()=>{};const t=async()=>{window.initNewGoogleSdkHappened=!0,google.accounts.id.initialize({client_id:n,scope:o?.join(" "),auto_select:(0,u.H)(),cancel_on_tap_outside:!1,callback:e}),r&&C(),f(!0)};if(window.initNewGoogleSdkHappened)return p&&t(),()=>{};const s=document.createElement("script");return s.src="https://accounts.google.com/gsi/client",s.onload=()=>{t()},s.onerror=()=>{(0,c.Z)(new Error(`Google SDK - ${s.src} failed to load`))},i()(document.body,"document body should exist when GoogleApiProvider is mounted"),document.body.appendChild(s),()=>{i()(document.body,"document body should exist when GoogleApiProvider is unmounted"),document.body&&document.body.contains(s)&&document.body.removeChild(s)}}),[n,a,o,C,r,p]);return(0,d.jsx)(g.Provider,{value:{ready:h,getGoogleUserData:async()=>({googleIdToken:m}),usingV2SDK:!0,showOneTap:C,hideOneTap:()=>{window.google.accounts.id.cancel()}}},e)};y.defaultProps={userAccountType:"consumer",scopes:h,showOneTapOnload:!1,allowReload:!1};const C=({userAccountType:e="consumer",children:n,clientId:o,scopes:r=h})=>{const[a,s]=(0,t.useState)("undefined"!=typeof window&&window.initGoogleSdkHappened||!1);(0,t.useEffect)((()=>{const e=async()=>{window.initGoogleSdkHappened=!0,await new Promise((e=>{window.gapi.load("auth2",(()=>{e()}))})),window.gapi.auth2.init({client_id:o,scope:r.join(" ")}),s(!0)};if(window.initGoogleSdkHappened)return()=>{};if(!(0,l.ww)(l.vy.FUNCTIONAL))return()=>{};const n=document.createElement("script");return n.src="https://apis.google.com/js/client:platform.js",n.onload=()=>{e()},i()(document.body,"document body should exist when GoogleApiProvider is mounted"),document.body.appendChild(n),()=>{i()(document.body,"document body should exist when GoogleApiProvider is unmounted"),document.body&&document.body.contains(n)&&document.body.removeChild(n)}}),[o,r]);return(0,d.jsx)(g.Provider,{value:{getGoogleUserData:async()=>{let n;try{n=await window.gapi.auth2.getAuthInstance().signIn({app_package_name:f[e]})}catch(e){return null}return{googleIdToken:n.getAuthResponse().id_token,firstName:n.getBasicProfile().getGivenName(),lastName:n.getBasicProfile().getFamilyName(),email:n.getBasicProfile().getEmail()}},ready:a}},n)},w=({userAccountType:e="consumer",useGoogleSignupApiV2:n,children:o,scopes:r=h,showOneTapOnload:i,...a})=>{const{loading:l,error:c,data:u}=(0,s.aM)(m[e]);return l||c||!u?(0,d.jsx)(t.Fragment,null,o):n?(0,d.jsx)(y,p({},a,{scopes:r,clientId:u.thirdPartyConfig.googleAuth.clientId,showOneTapOnload:i}),o):(0,d.jsx)(C,p({},a,{scopes:r,userAccountType:e,clientId:u.thirdPartyConfig.googleAuth.clientId}),o)},x=()=>(0,t.useContext)(g)},199458:(e,n,o)=>{o.d(n,{Z:()=>I});var t=o(563798),r=o(87363),i=o.n(r),a=o(232139),s=o(979186),l=o(90627),c=o(352420),u=o(68850),d=o(269703),p=o(116188),g=o(764074),h=o(377297),f=o(764748),m=o(914369),y=o(499516),C=o(682642),w=o(625198),x=o.n(w),v=o(866976),T=o(817013),k=o(882189),b=o(182145),j=o(982985),P=o(174797),A=o(988617),S=o(602256),O=o(158134),Z=o(929392),_=o(43817),R=o(731709);const G=b.ZP`
    query GetPersonalizeAccountData {
        siteConfig {
            cdnDomain
        }
    }
`,I=({onSkip:e,onPersonalizeAccount:n,personalizeAccountCsrfToken:o,personalizeAccountUrl:w="/signup/extra",profilePhotoUploadCsrfToken:b,profilePhotoUploadUrl:I="/signup/upload",profilePhotoChangeCsrfToken:E,profilePhotoChangeUrl:D="/signup/change"})=>{const{loading:U,data:z}=(0,k.aM)(G),M=(0,r.useContext)(a.default),{onAlert:L}=(0,P.V)(),[H,K]=(0,r.useState)(!1),V=(0,Z.as)(w),N=(0,Z.as)(D),B=(0,Z.as)(I),[F,$]=(0,r.useState)(""),[W,q]=(0,r.useState)("f"),[X,Y]=(0,r.useState)(""),[J,Q]=(0,r.useState)("u"),[ee,ne]=(0,r.useState)(!1),[oe,te]=(0,r.useState)(!1),[re,ie]=(0,r.useState)(null),[ae,se]=(0,r.useState)(!1),[le,ce]=(0,r.useState)(null),ue=(0,r.useRef)(null),de=(0,r.useRef)(null);(0,r.useEffect)((()=>{x()(ue.current,"Form DOM should be populated on mount"),ue.current.focus()}),[]);const pe=e=>{const n=e.currentTarget.value;"o"===n&&(x()(de.current,"Other gender form DOM should be populated on mount"),de.current.focus()),q(n)},ge=re&&!U&&z?(0,T.iu)(z.siteConfig.cdnDomain,"photo",re,"ls"):void 0;return(0,R.jsx)(i().Fragment,null,(0,R.jsx)(p.Z,{onSubmit:async e=>{let t;e.preventDefault(),L(null),K(!0),ce(null);try{const e=await fetch(V,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:(0,j.Z)({csrftok:o,phone_number:F,...oe?{text_app_link:"on"}:{},gender:W,..."o"===W?{gender_identity:X,gender_pronoun:J}:{}})});if(!e.ok)throw new Error(`Personalize account error status: ${e.status}: ${e.statusText}`);t=await e.json()}catch(e){(0,A.Z)(e),L({type:"error",message:(0,R.jsx)(S.Z,null)})}finally{K(!1)}t&&(t.success?n():(ce(t.error_fields),L({type:"error",message:(0,R.jsx)(S.Z,{errors:t.errors})})))}},(0,R.jsx)(l.Z,{gutter:2.5,marginBottom:4,verticalAlign:"middle"},(0,R.jsx)(c.Z,null,(0,R.jsx)(v.Z,{src:ge,size:M.v2_enabled?"xlarge":"medium"})),(0,R.jsx)(c.Z,{textAlign:"center",fill:!M.v2_enabled||void 0},(0,R.jsx)(C.Z,{full:!0,disabled:H,text:re?(0,d.ag)("Change Photo"):(0,d.ag)("Upload Photo"),htmlButtonType:"button",onClick:()=>{se(!0)}}))),(0,R.jsx)(s.Z,{marginBottom:2,className:_.J},(0,R.jsx)(g.Z,{htmlFor:"input-personalize-phone",helpTextInline:(0,d.ag)("Optional"),text:(0,d.ag)("Phone Number")}),(0,R.jsx)(h.Z,{id:"input-personalize-phone",type:"tel",placeholder:"123-456-7890",noMargin:!0,onChange:e=>{ne(!0),$(e.currentTarget.value)},value:F,disabled:H,tagRef:ue,validationStateType:le&&le.includes("phone")?"error":null})),ee&&(0,R.jsx)(s.Z,{marginBottom:2},(0,R.jsx)(g.Z,{htmlFor:"input-text-app-link"},(0,R.jsx)(u.Text,null,(0,R.jsx)(h.Z,{id:"input-text-app-link",type:"checkbox",value:oe,onChange:e=>{te(e.currentTarget.checked)},text:(0,R.jsx)(t.Trans,{id:(0,d.ag)("Text me a link for the Yelp app",{}).toString()})})),(0,R.jsx)(u.Text,{size:"small"},(0,R.jsx)(t.Trans,{id:(0,d.ag)("Carrier rates may apply",{}).toString()})))),(0,R.jsx)(s.Z,{marginBottom:1},(0,R.jsx)(f.Z,null,(0,R.jsx)(g.Z,{helpTextInline:(0,d.ag)("Optional"),text:(0,d.ag)("Gender")}),(0,R.jsx)(g.Z,{htmlFor:"input-personalize-gender-female"},(0,R.jsx)(u.Text,null,(0,R.jsx)(h.Z,{type:"radio",name:"gender",text:(0,d.ag)("Female"),id:"input-personalize-gender-female",value:"f",defaultChecked:!0,disabled:H,onChange:pe}))),(0,R.jsx)(g.Z,{htmlFor:"input-personalize-gender-male"},(0,R.jsx)(u.Text,null,(0,R.jsx)(h.Z,{type:"radio",name:"gender",text:(0,d.ag)("Male"),id:"input-personalize-gender-male",value:"m",disabled:H,onChange:pe}))),(0,R.jsx)(g.Z,{htmlFor:"input-personalize-gender-other"},(0,R.jsx)(u.Text,null,(0,R.jsx)(h.Z,{type:"radio",name:"gender",text:(0,d.ag)("Other Options"),id:"input-personalize-gender-other",value:"o",disabled:H,onChange:pe}))),(0,R.jsx)(s.Z,{display:"o"===W?"block":"none",marginTop:2,className:"other-gender-options"},(0,R.jsx)(s.Z,{marginBottom:2},(0,R.jsx)(h.Z,{type:"text",name:"gender-identity",placeholder:(0,d.ag)("Enter your gender"),noMargin:!0,onChange:e=>{Y(e.currentTarget.value)},value:X,disabled:H,tagRef:de})),(0,R.jsx)(s.Z,null,(0,R.jsx)(g.Z,{htmlFor:"input-personalize-pronoun",text:(0,d.ag)("How would you like to be referred to?"),helpTextBlock:"f"===J?(0,R.jsx)(t.Trans,{id:(0,d.ag)("e.g. Taylor is awesome, <0>she</0> writes the best reviews",{}).toString(),components:[(0,R.jsx)(u.Text,{inline:!0,bold:!0,size:"inherit"})]}):"m"===J?(0,R.jsx)(t.Trans,{id:(0,d.ag)("e.g. Taylor is awesome, <0>he</0> writes the best reviews",{}).toString(),components:[(0,R.jsx)(u.Text,{inline:!0,bold:!0,size:"inherit"})]}):(0,R.jsx)(t.Trans,{id:(0,d.ag)("e.g. Taylor is awesome, <0>they</0> write the best reviews",{}).toString(),components:[(0,R.jsx)(u.Text,{inline:!0,bold:!0,size:"inherit"})]})}),(0,R.jsx)(m.Z,{id:"input-personalize-pronoun",noMargin:!0,onChange:e=>{Q(e.currentTarget.value)},value:J,disabled:H,validationStateType:le&&le.includes("gender_pronoun")?"error":null},(0,R.jsx)(y.Z,{value:"f"},(0,d.ag)("Female")),(0,R.jsx)(y.Z,{value:"m"},(0,d.ag)("Male")),(0,R.jsx)(y.Z,{value:"u"},(0,d.ag)("Neutral"))))))),(0,R.jsx)(s.Z,{marginTop:4},(0,R.jsx)(C.Z,{full:!0,type:"primary",htmlButtonType:"submit",disabled:H},(0,R.jsx)(t.Trans,{id:(0,d.ag)("Save & continue",{}).toString()}))),(0,R.jsx)(s.Z,{marginTop:4},(0,R.jsx)(u.Text,null,(0,R.jsx)(C.Z,{full:!0,type:"link",htmlButtonType:"button",disabled:H,onClick:n=>{n.preventDefault(),e()}},(0,R.jsx)(t.Trans,{id:(0,d.ag)("Skip",{}).toString()}))))),(0,R.jsx)(O.Z,{oldProfilePhotoId:re,visible:ae,onClose:()=>{se(!1)},onComplete:e=>{ie(e),se(!1)},profilePhotoUploadUrl:B,profilePhotoUploadCsrfToken:b,profilePhotoChangeUrl:N,profilePhotoChangeCsrfToken:E}))}},803110:(e,n,o)=>{o.d(n,{ZP:()=>K});var t=o(87363),r=o.n(t),i=o(979186),a=o(269703),s=o(412611),l=o(625198),c=o.n(l),u=o(182145),d=o(882189),p=o(808756),g=o(510832),h=o(277599),f=o.n(h),m=o(395203),y=o(43491),C=o(618431),w=o(503587),x=o(899251),v=o(438701),T=o(977147),k=o(549482),b=o(534101),j=o(4695),P=o(84198),A=o(626209),S=o(27176),O=o(105122),Z=o(174797),_=o(955621),R=o(988617),G=o(602256),I=o(696792),E=(o(795967),o(375447)),D=o(852996),U=o(888109),z=o(731709);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},M.apply(this,arguments)}const L=({initialScreen:e,title:n=(0,a.ag)("You’re almost done!"),subtitle:o,loginTitle:l,loginSubtitle:u,signupTitle:d,signupSubtitle:p,locale:g,visible:h,onClose:f,isGDPR:m,onAuth:P,loginCsrfToken:R,signupCsrfToken:G,forgotPasswordCsrfToken:M,magicLinkCsrfToken:L,personalizeAccountCsrfToken:H,profilePhotoUploadCsrfToken:K,profilePhotoChangeCsrfToken:V,appleOneClickCsrfToken:N,googleOneClickUrl:B=I.UT,googleOneClickCsrfToken:F,useGoogleApiV2:$=!1,showGoogleOneTap:W=!1,initialEmailValue:q="",displayModal:X=!0,fullscreenModal:Y=!1,isRaXLogin:J,pslRedirectUrl:Q})=>{const[ee,ne]=(0,t.useState)(null),{isModernizedUI:oe,isPasswordlessLogin:te,showAppleButton:re,isOtpLoginFlow:ie}=(0,y.P)(),[ae,se]=(0,t.useState)({screen:e}),le=(0,t.useRef)(!0),ce=(e,n=null)=>{se(e),ne(n)},ue=e=>{ne(e)},de=()=>{"personalizeAccount"===ae.screen?P():f()},{onGoogleUnverifiedEmail:pe,onGoogleMissingInformation:ge}=(0,E.Y)(ce,ie),{onAuth:he}=(0,D.Z)({onSignupComplete:P,onMissingInformation:ge,onUnverifiedEmail:pe,onAlert:ue,googleOneClickCsrfToken:F,googleOneClickUrl:B,termsAcknowledged:()=>window.userAuthModalTermsAcknowledged});let fe;if("login"===ae.screen){const e={title:l||n,subtitle:u||o,locale:g,isGDPR:m,onLogin:P,loginCsrfToken:R,forgotPasswordCsrfToken:M,magicLinkCsrfToken:L,googleOneClickCsrfToken:F,appleOneClickCsrfToken:N,useGoogleApiV2:$,alert:ee,onChangeScreen:ce,showGoogleOneTap:W,initialEmailValue:q,isRaXLogin:J,isPasswordlessLogin:te,pslRedirectUrl:Q};fe=oe?(0,z.jsx)(w.Z,e):(0,z.jsx)(x.DG,e)}else"otpLogin"===ae.screen?fe=(0,z.jsx)(v.Z,{title:n,emailValue:q,isGDPR:m,googleOneClickCsrfToken:F,appleOneClickCsrfToken:N,locale:g,onLogin:P,onChangeScreen:ce,alert:ee,setAlert:ue,sendOtpOnLoad:le}):"loginMin"===ae.screen?fe=(0,z.jsx)(x.eA,{locale:g,isGDPR:m,onLogin:P,loginCsrfToken:R,forgotPasswordCsrfToken:M,magicLinkCsrfToken:L,googleOneClickCsrfToken:F,appleOneClickCsrfToken:N,useGoogleApiV2:$,alert:ee,onChangeScreen:ce,initialEmailValue:q}):"signup"===ae.screen?fe=(0,z.jsx)(C.Z,{title:d||n,subtitle:p||o,locale:g,isGDPR:m,onSignupComplete:P,googleOneClickCsrfToken:F,appleOneClickCsrfToken:N,useGoogleApiV2:$,alert:ee,onChangeScreen:ce,showGoogleOneTap:W}):"emailSignup"===ae.screen?fe=(0,z.jsx)(T.mk,{context:ae.data,locale:g,isGDPR:m,signupCsrfToken:G,alert:ee,onChangeScreen:ce}):"emailSignupMin"===ae.screen?fe=(0,z.jsx)(T.qH,{context:ae.data,locale:g,isGDPR:m,signupCsrfToken:G,alert:ee,onChangeScreen:ce,onComplete:P,googleOneClickCsrfToken:F,useGoogleApiV2:$,appleOneClickCsrfToken:N}):"forgotPassword"===ae.screen?fe=(0,z.jsx)(k.Z,{context:ae.data,forgotPasswordCsrfToken:M,alert:ee,onChangeScreen:ce}):"personalizeAccount"===ae.screen?fe=(0,z.jsx)(b.Z,{context:ae.data,onComplete:P,personalizeAccountCsrfToken:H,profilePhotoUploadCsrfToken:K,profilePhotoChangeCsrfToken:V,alert:ee}):"externalAuth"===ae.screen?fe=(0,z.jsx)(j.Z,{context:ae.data,locale:g,onComplete:P,googleOneClickCsrfToken:F,onChangeScreen:ce,alert:ee}):"oneTap"===ae.screen?fe=null:c()(!0,`Invalid UserAuthModal screen: ${ae.screen}`);let me=null;if(fe){const e=(0,z.jsx)(i.Z,null,fe);me=X?(0,z.jsx)(s.w,{reserveTitleSpacing:!1,visible:h,onClose:de,size:oe?"large":"small",fullscreen:oe||Y},h&&e):e}return(0,z.jsx)(Z.h,{onAlert:ue},(0,z.jsx)(U.Z,{enabled:re,locale:g,guv:"undefined"!=typeof window&&window.yelp?.guv||"user-guv",userAccountType:"consumer",redirectURI:"undefined"!=typeof window?`https://${window.location.hostname}`:void 0,state:N},(0,z.jsx)(_.AT,{useGoogleSignupApiV2:$,onAuth:he,isGDPR:m,allowReload:!0,showOneTapOnload:"oneTap"===ae.screen},(0,z.jsx)(S.Ag,null,(0,z.jsx)(A.rh,null,$?(0,z.jsx)(r().Fragment,null,me):(0,z.jsx)(O.Rq,{locale:g,onAuth:he,showOnLoad:"oneTap"===ae.screen},me))))))},H=u.ZP`
    query GetUserAuthModalData($countryCode: String) {
        country(code: $countryCode) {
            gdprCompliant
        }

        csrfTokenLogin: csrfToken(scope: "/login")
        csrfTokenSignup: csrfToken(scope: "/signup")
        csrfTokenForgotPassword: csrfToken(scope: "/forgot/ajax")
        csrfTokenMagicLink: csrfToken(scope: "/login/magic")
        csrfTokenPersonalizeAccount: csrfToken(scope: "/signup/extra")
        csrfTokenProfilePhotoUpload: csrfToken(scope: "signup_photo_upload")
        csrfTokenProfilePhotoChange: csrfToken(scope: "signup_photo_change")
        csrfTokenGoogleOneClick: csrfToken(scope: "/signup/one_click_google")
        csrfTokenAppleOneClick: csrfToken(scope: "/signup/one_click_apple")
    }
`,K=({locale:e,visible:n,onClose:o,initialScreen:r,displayModal:a=!0,fullscreenModal:l=!1,isModernizedUI:c=!1,isPasswordlessLogin:u=!1,showAppleButton:h=!1,prefillZipCode:C=!1,...w})=>{const{loading:x,error:v,data:T}=(0,d.aM)(H,{variables:{countryCode:(0,P.EB)(e)}}),{onUserAuthChange:k,isUserLoggedIn:b}=(0,m.Ii)(),[j,A]=(0,t.useState)(!1),{onAuth:S}=w;(0,t.useEffect)((()=>{n&&b&&!j&&(S(),A(!0))}),[n,b,S,j]);if((v||x||!T)&&"oneTap"===r)return null;if(v){(0,R.Z)(f()(v));const e=(0,z.jsx)(i.Z,{style:{minHeight:"300px"}},(0,z.jsx)(g.Z,{type:"error"},(0,z.jsx)(G.Z,null)));return a?(0,z.jsx)(s.w,{reserveTitleSpacing:!1,visible:n,onClose:o,size:c?"large":"small",fullscreen:c||l},e):e}if(x||!T){const e=(0,z.jsx)(p.Z,{isLoading:!0},(0,z.jsx)(i.Z,{style:{minHeight:"300px"}}));return a?(0,z.jsx)(s.w,{reserveTitleSpacing:!1,visible:n,onClose:o,size:c?"large":"small",fullscreen:c||l},e):e}return(0,z.jsx)(y.$,{isModernizedUI:c,isPasswordlessLogin:u,isOtpLoginFlow:"otpLogin"===r,showAppleButton:h,prefillZipCode:C},(0,z.jsx)(L,M({},w,{onAuth:async()=>{k(!0),A(!0),w.onAuth()},isGDPR:T.country.gdprCompliant,initialScreen:r,locale:e,visible:n,onClose:o,displayModal:a,fullscreenModal:l,loginCsrfToken:T.csrfTokenLogin,signupCsrfToken:T.csrfTokenSignup,forgotPasswordCsrfToken:T.csrfTokenForgotPassword,magicLinkCsrfToken:T.csrfTokenMagicLink,personalizeAccountCsrfToken:T.csrfTokenPersonalizeAccount,profilePhotoUploadCsrfToken:T.csrfTokenProfilePhotoUpload,profilePhotoChangeCsrfToken:T.csrfTokenProfilePhotoChange,googleOneClickCsrfToken:T.csrfTokenGoogleOneClick,appleOneClickCsrfToken:T.csrfTokenAppleOneClick})))}},105122:(e,n,o)=>{o.d(n,{Rq:()=>h,jB:()=>f});var t=o(87363),r=o.n(t),i=o(182145),a=o(882189),s=o(84198),l=o(397077),c=o(731709);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},u.apply(this,arguments)}const d=(0,t.createContext)({ready:!1,show:()=>{throw Error("Missing GoogleOneTap context")},hide:()=>{throw Error("Missing GoogleOneTap context")}}),p=i.ZP`
    query GetGoogleOneTapData($countryCode: String) {
        country(code: $countryCode) {
            gdprCompliant
        }
        siteConfig {
            googleAuth(platform: WWW) {
                clientId
            }
        }
    }
`,g=({children:e,showOnLoad:n,clientId:o,isGDPR:t,onAuth:r})=>{const{ready:i,show:a}=(0,l.r)({onAuth:r,showOnLoad:n,clientId:o,isGDPR:t});return(0,c.jsx)(d.Provider,{value:{ready:i,show:a,hide:()=>{window.google.accounts.id.cancel()}}},e)};g.defaultProps={showOnLoad:!1};const h=({children:e,locale:n,...o})=>{const{loading:t,error:i,data:l}=(0,a.aM)(p,{variables:{countryCode:(0,s.EB)(n)}});return t||i||!l?(0,c.jsx)(r().Fragment,null,e):(0,c.jsx)(g,u({},o,{clientId:l.siteConfig.googleAuth.clientId,isGDPR:l.country.gdprCompliant}),e)};h.defaultProps=g.defaultProps;const f=()=>(0,t.useContext)(d)},626209:(e,n,o)=>{o.d(n,{XV:()=>f,rh:()=>h});var t=o(87363),r=o.n(t),i=o(625198),a=o.n(i),s=o(182145),l=o(882189),c=o(731709);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},u.apply(this,arguments)}const d=(0,t.createContext)({ready:!1,visibleSiteKey:null,invisibleSiteKey:null,getHCaptchaResponse:()=>{throw Error("Missing HCaptcha context")}}),p=s.ZP`
    query GetHCaptchaData {
        thirdPartyConfig {
            hcaptcha {
                visibleSiteKey
                invisibleSiteKey
            }
        }
    }
`,g=({children:e,visibleSiteKey:n,invisibleSiteKey:o})=>{const[r,i]=(0,t.useState)("undefined"!=typeof window&&window.initHCaptchaHappened||!1);(0,t.useEffect)((()=>{if(window.hCaptchaReady=()=>{window.initHCaptchaHappened=!0,i(!0)},window.initHCaptchaHappened)return()=>{};const e=new URLSearchParams({onload:"hCaptchaReady",render:"explicit",recaptchacompat:"off"}),n=document.createElement("script");return n.src=`https://hcaptcha.com/1/api.js?${e.toString()}`,n.async=!0,n.defer=!0,a()(document.body,"document body should exist when HCaptchaProvider is mounted"),document.body.appendChild(n),()=>{a()(document.body,"document body should exist when HCaptchaProvider is unmounted"),document.body.removeChild(n)}}),[o]);return(0,c.jsx)(d.Provider,{value:{ready:r,visibleSiteKey:n,invisibleSiteKey:o,getHCaptchaResponse:async e=>(e=>{a()(document.body,"document body should exist when HCaptcha is mounted");const n=document.createElement("div");return a()(e,"captchaContainer should exist when HCaptcha is mounted"),e.current.appendChild(n),new Promise(((t,r)=>{const i=window.hcaptcha.render(n,{sitekey:o,size:"invisible",reCaptchaCompat:!1,callback:o=>{e.current.removeChild(n),t(o)},"error-callback":o=>{e.current.removeChild(n),r(o)}});window.hcaptcha.execute(i)}))})(e)}},e)},h=({children:e,...n})=>{const{loading:o,error:t,data:i}=(0,l.aM)(p);return o||t||!i?(0,c.jsx)(r().Fragment,null,e):(0,c.jsx)(g,u({},n,{invisibleSiteKey:i.thirdPartyConfig.hcaptcha.invisibleSiteKey,visibleSiteKey:i.thirdPartyConfig.hcaptcha.visibleSiteKey}),e)},f=()=>(0,t.useContext)(d)},27176:(e,n,o)=>{o.d(n,{Ag:()=>h});var t=o(87363),r=o.n(t),i=o(625198),a=o.n(i),s=o(182145),l=o(882189),c=o(731709);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},u.apply(this,arguments)}const d=(0,t.createContext)({ready:!1,publicKeyV2:null,getV3Token:()=>{throw Error("Missing Recaptcha context")}}),p=s.ZP`
    query GetRecaptchaData {
        siteConfig {
            recaptcha {
                publicKeyV2
                publicKeyV3
            }
        }
    }
`,g=({children:e,publicKeyV2:n,publicKeyV3:o})=>{const[r,i]=(0,t.useState)("undefined"!=typeof window&&window.initRecaptchaHappened||!1);(0,t.useEffect)((()=>{if(window.initRecaptchaProvider=()=>{window.grecaptcha.ready((()=>{i(!0)})),window.initRecaptchaHappened=!0},window.initRecaptchaHappened)return()=>{};const e=new URLSearchParams({onload:"initRecaptchaProvider",render:o}),n=document.createElement("script");return n.src=`https://www.google.com/recaptcha/api.js?${e.toString()}`,n.async=!0,n.defer=!0,a()(document.body,"document body should exist when RecaptchaProvider is mounted"),document.body.appendChild(n),()=>{a()(document.body,"document body should exist when RecaptchaProvider is unmounted"),document.body.removeChild(n)}}),[o]);return(0,c.jsx)(d.Provider,{value:{ready:r,publicKeyV2:n,getV3Token:async e=>await window.grecaptcha.execute(o,{action:e})}},e)},h=({children:e,...n})=>{const{loading:o,error:t,data:i}=(0,l.aM)(p);return o||t||!i?(0,c.jsx)(r().Fragment,null,e):(0,c.jsx)(g,u({},n,{publicKeyV2:i.siteConfig.recaptcha.publicKeyV2,publicKeyV3:i.siteConfig.recaptcha.publicKeyV3}),e)}},43817:(e,n,o)=>{o.d(n,{J:()=>t});const t="fs-block"}}]);
//# sourceMappingURL=https://js-sourcemaps.yelpcorp.com/assets/public/module_yelp-frontend_shared-8ff517cba2f156994cd426456a4ab01bb8183430.yji-1e898e8f3d8ec9295f0e.js.map